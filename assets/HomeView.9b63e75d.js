var j=Object.defineProperty;var A=(e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var C=(e,t,s)=>(A(e,typeof t!="symbol"?t+"":t,s),s);import{u as M,B as O,g as $,a as S,b as E,_ as T}from"./index.3db5b820.js";import{_ as q}from"./List.vue_vue_type_script_setup_true_lang.18ef27f4.js";import{m as F,r as k,w as z,q as _,t as p,G as r,c as D,o as Q,v as o,k as R,u as f,A as G,B as N,z as I,I as Y,F as L,P,Q as U}from"./@vue.aa17ec7c.js";import{d as b}from"./dayjs.8eec1a0d.js";import"./vue-router.835b731e.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.9aab9800.js";import"./vue-i18n.bcf46dc7.js";import"./@intlify.03657722.js";import"./lodash-es.94cbcf30.js";const J=(e,t,s,n)=>s*e/n+t,K={easeIn(e,t,s,n){return s*(e/=n)*e*e*e+t},easeOut(e,t,s,n){return-s*((e=e/n-1)*e*e*e-1)+t},easeInOut(e,t,s,n){return(e/=n/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t}};class W{constructor(t,s,n,c=()=>{},l=J){C(this,"runner");this.from=t,this.to=s,this.duration=n,this.callback=c,this.curve=l}start(){let s=0,n=this.from;const c=()=>{const l=this.curve(s,this.from,this.to-this.from,this.duration);if(s>this.duration){this.callback(this.to);return}s+=1/60,n=l,this.callback(n),this.runner=window.requestAnimationFrame(c)};c()}stop(){this.runner!==void 0&&window.cancelAnimationFrame(this.runner)}}const X={class:"font-[Helvetica Neue]"},Z=F({__name:"DynamicNumber",props:{value:null,init:{type:Boolean},toFixed:{default:1},duration:{default:2}},setup(e){const t=e,s=k("0"),n=k(),c=(d,x)=>new W(d,x,t.duration,v=>{s.value=v.toFixed(t.toFixed)},K.easeOut),l=()=>{var d;(d=n.value)==null||d.stop(),n.value=c(Number(s.value),t.value),n.value.start()};return t.init&&l(),z(()=>t.value,()=>{l()}),(d,x)=>(_(),p("div",X,r(s.value),1))}}),ee=e=>(P("data-v-858c6a10"),e=e(),U(),e),te={class:"w-full h-full p-2 overflow-y-auto"},se={class:"flex flex-wrap"},oe={class:"bg-stone-800 h-40 w-full rounded-lg m-1 sm:flex-1 p-2"},ne={class:"flex justify-between"},ie={class:"text-white"},ae={class:"ml-7 text-sm"},le=["onClick"],re={class:"flex items-center"},ce={class:"rounded-full bg-white border w-10 h-10 flex items-center justify-center"},de={class:"flex flex-col px-4"},ue={class:"flex text-md font-semibold"},me={class:"flex text-xs"},fe=ee(()=>o("div",{class:"px-1"},"|",-1)),_e={class:"text-lg font-bold"},ve={class:"h-24 px-4 mt-4"},he={class:"end flex items-center text-sm"},pe={key:1,class:"flex justify-center items-center text-sm text-gray-600 pt-20"},xe=F({__name:"HomeView",setup(e){const{list:t}=M(),s=D(()=>t.value.filter(i=>i.time>=b().startOf("day").unix()&&i.time<=b().endOf("day").unix())),n=D(()=>s.value.reduce((i,u)=>i+(u.type===O.Expenses?-1:1)*u.money,0)),{show:c}=E(),l=24*60*60,d=(i,u)=>{const a=t.value[u-1];if(!a)return b.unix(i.time).format("YYYY-MM-DD");if(a.time-i.time>=l)return b.unix(i.time).format("YYYY-MM-DD")},x=(i,u)=>{let a=0;const m=Math.min(t.value.length,i+u);for(let h=i;h<m;h+=1){const V=t.value[h],B=t.value[h-1];(!B||B.time-V.time>=l)&&(a+=1)}const y=56,g=72,w=m-i;return y*a+g*w},v=k(!1);Q(()=>{setTimeout(()=>{v.value=!0},3e3)});const H=k("");return(i,u)=>(_(),p("div",te,[o("div",se,[o("div",oe,[o("div",ne,[o("div",ie,r(i.$t("Today")),1),R(Z,{value:f(n),init:"",class:"text-white text-4xl font-bold"},null,8,["value"])])])]),f(t).length?(_(),G(q,{key:0,list:f(t),"get-range-height":x,"footer-height":400,"value-key":"id",class:"main-bill-list mx-1"},{default:N(({item:a,index:m})=>{var y,g,w;return[o("div",null,[d(a,m)?(_(),p("div",{key:0,class:I(["divider flex justify-between items-center px-4 pt-6 pb-3 cursor-pointer",[`divider-${m}`,{animated:v.value}]])},[o("div",ae,r(d(a,m)),1)],2)):Y("",!0),o("div",{class:I(["bill-item flex justify-between items-center px-4 py-4 rounded-lg buttoned cursor-pointer",[`item-${m}`,{animated:v.value,"to-remove":H.value===a.id}]]),onClick:h=>f(c)(a)},[o("div",re,[o("div",ce,[o("i",{class:I([(y=f($)(a.categoryId))==null?void 0:y.icon])},null,2)]),o("div",de,[o("div",ue,[o("div",null,r(i.$t(f($)(a.categoryId).name)),1)]),o("div",me,[o("div",null,r((w=(g=f(S)(a.creatorId))==null?void 0:g.name)!=null?w:"unknown user"),1),a.comment?(_(),p(L,{key:0},[fe,o("div",null,r(a.comment),1)],64)):Y("",!0)])])]),o("div",_e,r(a.money),1)],10,le)])]}),footer:N(()=>[o("div",ve,[o("div",he,r(i.$t("ended")),1)])]),_:1},8,["list"])):(_(),p("div",pe,r(i.$t("nothing-here-add-one-bill")),1))]))}});const Fe=T(xe,[["__scopeId","data-v-858c6a10"]]);export{Fe as default};
