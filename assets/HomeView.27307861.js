var S=Object.defineProperty;var A=(e,t,s)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var k=(e,t,s)=>(A(e,typeof t!="symbol"?t+"":t,s),s);import{t as F,c as O,u as j,B as E,a as Y,_ as q}from"./index.1ab36cef.js";import{_ as z,a as L}from"./BillItem.vue_vue_type_script_setup_true_lang.a970845e.js";import{m as I,r as g,w as R,q as h,t as _,G as p,c as D,o as G,v as u,k as b,u as w,B,z as C,I as Q}from"./@vue.aa17ec7c.js";import{d}from"./dayjs.8eec1a0d.js";import"./vue-router.835b731e.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.9aab9800.js";import"./vue-i18n.bcf46dc7.js";import"./@intlify.03657722.js";import"./lodash-es.94cbcf30.js";const J=(e,t,s,o)=>s*e/o+t,K={easeIn(e,t,s,o){return s*(e/=o)*e*e*e+t},easeOut(e,t,s,o){return-s*((e=e/o-1)*e*e*e-1)+t},easeInOut(e,t,s,o){return(e/=o/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t}};class P{constructor(t,s,o,c=()=>{},l=J){k(this,"runner");this.from=t,this.to=s,this.duration=o,this.callback=c,this.curve=l}start(){let s=0,o=this.from;const c=()=>{const l=this.curve(s,this.from,this.to-this.from,this.duration);if(s>this.duration){this.callback(this.to);return}s+=1/60,o=l,this.callback(o),this.runner=window.requestAnimationFrame(c)};c()}stop(){this.runner!==void 0&&window.cancelAnimationFrame(this.runner)}}const U={class:"font-[Helvetica Neue]"},W=I({__name:"DynamicNumber",props:{value:null,init:{type:Boolean},toFixed:{default:1},duration:{default:2}},setup(e){const t=e,s=g("0"),o=g(),c=(m,f)=>new P(m,f,t.duration,x=>{s.value=`${x>0?"+":"-"} ${Math.abs(x).toFixed(t.toFixed)}`},K.easeOut),l=()=>{var m;(m=o.value)==null||m.stop(),o.value=c(Number(s.value.replace(" ","")),t.value),o.value.start()};return t.init&&l(),R(()=>t.value,()=>{l()}),(m,f)=>(h(),_("div",U,p(s.value),1))}}),M=e=>{var o;const t=d();if(e.isSame(t,"days"))return F("Today");const s=e.diff(t,"day");return s<=3&&s>=0?((o=O.value)==null?void 0:o.id)==="zh"?`${e.format("DD")}\u65E5`:e.format("MM-DD"):e.isSame(t,"year")?e.format("MM-DD"):e.format("YYYY-MM-DD")},X={class:"w-full h-full p-2 flex flex-col overflow-hidden"},Z={class:"flex flex-wrap"},ee={class:"bg-stone-800 h-20 w-full rounded-lg m-1 sm:flex-1 p-2"},te={class:"flex justify-between"},se={class:"text-white"},oe={key:0,class:"flex-1 overflow-y-auto"},ne=["onClick"],ie={class:"ml-7 text-sm"},ae={class:"h-24 px-4 mt-4"},re={class:"end flex items-center text-sm"},le={key:1,class:"flex justify-center items-center text-sm text-gray-600 pt-20"},ce=I({__name:"HomeView",setup(e){const{list:t}=j(),s=D(()=>t.value.filter(n=>n.time>=d().startOf("day").unix()&&n.time<=d().endOf("day").unix())),o=D(()=>s.value.reduce((n,a)=>n+(a.type===E.Expenses?-1:1)*a.money,0)),{show:c}=Y(),l=(n,a)=>{const i=t.value[a-1];if(!i)return M(d.unix(n.time));const r=d.unix(i.time),v=d.unix(n.time);if(!r.isSame(v,"days"))return M(v)},m=(n,a)=>{let i=0;const r=Math.min(t.value.length,n+a);for(let y=n;y<r;y+=1){const N=t.value[y],$=t.value[y-1];(!$||!d.unix($.time).isSame(d.unix(N.time),"days"))&&(i+=1)}const v=56,H=72,T=r-n;return v*i+H*T},f=g(!1);G(()=>{setTimeout(()=>{f.value=!0},1e3)});const x=n=>{var a;(a=document.querySelector(`.divider-${n}`))==null||a.scrollIntoView({behavior:"smooth"})},V=g("");return(n,a)=>(h(),_("div",X,[u("div",Z,[u("div",ee,[u("div",te,[u("div",se,p(n.$t("Today")),1),b(W,{value:w(o),init:"",class:"text-white text-4xl font-bold"},null,8,["value"])])])]),w(t).length?(h(),_("div",oe,[b(z,{list:w(t),"get-range-height":m,"footer-height":400,"value-key":"id",class:"main-bill-list mx-1"},{default:B(({item:i,index:r})=>[u("div",null,[l(i,r)?(h(),_("div",{key:0,class:C(["divider flex justify-between items-center px-4 pt-6 pb-3 cursor-pointer",[`divider-${r}`,{animated:f.value}]]),onClick:v=>x(r)},[u("div",ie,p(l(i,r)),1)],10,ne)):Q("",!0),b(L,{bill:i,class:C([`item-${r}`,{animated:f.value,"to-remove":V.value===i.id}]),onClick:v=>w(c)(i)},null,8,["bill","class","onClick"])])]),footer:B(()=>[u("div",ae,[u("div",re,p(n.$t("ended")),1)])]),_:1},8,["list"])])):(h(),_("div",le,p(n.$t("nothing-here-add-one-bill")),1))]))}});const be=q(ce,[["__scopeId","data-v-91edf1ab"]]);export{be as default};
