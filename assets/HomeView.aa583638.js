var N=Object.defineProperty;var F=(e,t,s)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var b=(e,t,s)=>(F(e,typeof t!="symbol"?t+"":t,s),s);import{t as O,c as S,u as T,B as j,a as E,_ as Y}from"./index.15024016.js";import{_ as z,a as q}from"./BillItem.vue_vue_type_script_setup_true_lang.461017cb.js";import{m as H,r as g,w as L,q as v,t as w,G as _,c as k,o as R,v as u,k as $,u as y,A as G,B,z as M,I as Q}from"./@vue.aa17ec7c.js";import{d as c}from"./dayjs.8eec1a0d.js";import"./vue-router.835b731e.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.9aab9800.js";import"./vue-i18n.bcf46dc7.js";import"./@intlify.03657722.js";import"./lodash-es.94cbcf30.js";const J=(e,t,s,n)=>s*e/n+t,K={easeIn(e,t,s,n){return s*(e/=n)*e*e*e+t},easeOut(e,t,s,n){return-s*((e=e/n-1)*e*e*e-1)+t},easeInOut(e,t,s,n){return(e/=n/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t}};class P{constructor(t,s,n,l=()=>{},o=J){b(this,"runner");this.from=t,this.to=s,this.duration=n,this.callback=l,this.curve=o}start(){let s=0,n=this.from;const l=()=>{const o=this.curve(s,this.from,this.to-this.from,this.duration);if(s>this.duration){this.callback(this.to);return}s+=1/60,n=o,this.callback(n),this.runner=window.requestAnimationFrame(l)};l()}stop(){this.runner!==void 0&&window.cancelAnimationFrame(this.runner)}}const U={class:"font-[Helvetica Neue]"},W=H({__name:"DynamicNumber",props:{value:null,init:{type:Boolean},toFixed:{default:1},duration:{default:2}},setup(e){const t=e,s=g("0"),n=g(),l=(d,f)=>new P(d,f,t.duration,p=>{s.value=`${p>0?"+":"-"} ${Math.abs(p).toFixed(t.toFixed)}`},K.easeOut),o=()=>{var d;(d=n.value)==null||d.stop(),n.value=l(Number(s.value.replace(" ","")),t.value),n.value.start()};return t.init&&o(),L(()=>t.value,()=>{o()}),(d,f)=>(v(),w("div",U,_(s.value),1))}}),C=e=>{var n;const t=c();return e.isSame(t,"days")?O("Today"):e.diff(t,"month")<=3?((n=S.value)==null?void 0:n.id)==="zh"?`${e.format("DD")}\u65E5`:e.format("MM-DD"):e.isSame(t,"month")?e.format("YYYY-MM-DD"):e.format("MM-DD")},X={class:"w-full h-full p-2 overflow-y-auto"},Z={class:"flex flex-wrap"},ee={class:"bg-stone-800 h-20 w-full rounded-lg m-1 sm:flex-1 p-2"},te={class:"flex justify-between"},se={class:"text-white"},ne={class:"ml-7 text-sm"},ae={class:"h-24 px-4 mt-4"},ie={class:"end flex items-center text-sm"},oe={key:1,class:"flex justify-center items-center text-sm text-gray-600 pt-20"},re=H({__name:"HomeView",setup(e){const{list:t}=T(),s=k(()=>t.value.filter(a=>a.time>=c().startOf("day").unix()&&a.time<=c().endOf("day").unix())),n=k(()=>s.value.reduce((a,m)=>a+(m.type===j.Expenses?-1:1)*m.money,0)),{show:l}=E(),o=(a,m)=>{const i=t.value[m-1];if(!i)return C(c.unix(a.time));const r=c.unix(i.time),h=c.unix(a.time);if(!r.isSame(h,"days"))return C(h)},d=(a,m)=>{let i=0;const r=Math.min(t.value.length,a+m);for(let x=a;x<r;x+=1){const A=t.value[x],D=t.value[x-1];(!D||!c.unix(D.time).isSame(c.unix(A.time),"days"))&&(i+=1)}const h=56,I=72,V=r-a;return h*i+I*V},f=g(!1);R(()=>{setTimeout(()=>{f.value=!0},1e3)});const p=g("");return(a,m)=>(v(),w("div",X,[u("div",Z,[u("div",ee,[u("div",te,[u("div",se,_(a.$t("Today")),1),$(W,{value:y(n),init:"",class:"text-white text-4xl font-bold"},null,8,["value"])])])]),y(t).length?(v(),G(z,{key:0,list:y(t),"get-range-height":d,"footer-height":400,"value-key":"id",class:"main-bill-list mx-1"},{default:B(({item:i,index:r})=>[u("div",null,[o(i,r)?(v(),w("div",{key:0,class:M(["divider flex justify-between items-center px-4 pt-6 pb-3 cursor-pointer",[`divider-${r}`,{animated:f.value}]])},[u("div",ne,_(o(i,r)),1)],2)):Q("",!0),$(q,{bill:i,class:M([`item-${r}`,{animated:f.value,"to-remove":p.value===i.id}]),onClick:h=>y(l)(i)},null,8,["bill","class","onClick"])])]),footer:B(()=>[u("div",ae,[u("div",ie,_(a.$t("ended")),1)])]),_:1},8,["list"])):(v(),w("div",oe,_(a.$t("nothing-here-add-one-bill")),1))]))}});const we=Y(re,[["__scopeId","data-v-529dac2d"]]);export{we as default};
