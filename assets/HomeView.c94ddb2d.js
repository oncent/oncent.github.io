var O=Object.defineProperty;var j=(e,t,s)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var D=(e,t,s)=>(j(e,typeof t!="symbol"?t+"":t,s),s);import{t as E,c as Y,u as q,B as z,a as L,_ as R}from"./index.f6ac297b.js";import{_ as G,a as Q}from"./BillItem.vue_vue_type_script_setup_true_lang.330db851.js";import{m as V,r as x,w as J,q as p,t as h,G as _,c as B,o as K,v as m,k as b,u as g,B as C,z as T,I as P}from"./@vue.97c6951d.js";import{d as l}from"./dayjs.386643b6.js";import{a as U}from"./mathjs.71232648.js";import"./vue-router.f889bb8d.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.5aff771e.js";import"./vue-i18n.ac1798c5.js";import"./@intlify.cff06da3.js";import"./complex.js.3b936b7b.js";import"./lodash-es.4471eccc.js";import"./decimal.js.f8235747.js";import"./typed-function.0cf4a37b.js";import"./@babel.9ebe5c4e.js";import"./fraction.js.f0253b53.js";const W=(e,t,s,o)=>s*e/o+t,X={easeIn(e,t,s,o){return s*(e/=o)*e*e*e+t},easeOut(e,t,s,o){return-s*((e=e/o-1)*e*e*e-1)+t},easeInOut(e,t,s,o){return(e/=o/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t}};class Z{constructor(t,s,o,u=()=>{},c=W){D(this,"runner");this.from=t,this.to=s,this.duration=o,this.callback=u,this.curve=c}start(){let s=0,o=this.from;const u=()=>{const c=this.curve(s,this.from,this.to-this.from,this.duration);if(s>this.duration){this.callback(this.to);return}s+=1/60,o=c,this.callback(o),this.runner=window.requestAnimationFrame(u)};u()}stop(){this.runner!==void 0&&window.cancelAnimationFrame(this.runner)}}const ee={class:"font-[Helvetica Neue]"},te=V({__name:"DynamicNumber",props:{value:null,init:{type:Boolean},toFixed:{default:1},duration:{default:2}},setup(e){const t=e,s=x("0"),o=x(),u=(d,y)=>new Z(d,y,t.duration,v=>{s.value=`${v>0?"+":"-"} ${Math.abs(v).toFixed(t.toFixed)}`},X.easeOut),c=()=>{var d;(d=o.value)==null||d.stop(),o.value=u(Number(s.value.replace(" ","")),t.value),o.value.start()};return t.init&&c(),J(()=>t.value,()=>{c()}),(d,y)=>(p(),h("div",ee,_(s.value),1))}}),I=e=>{var o;const t=l();if(e.isSame(t,"days"))return E("Today");const s=e.diff(t,"day");return s<=3&&s>=0?((o=Y.value)==null?void 0:o.id)==="zh"?`${e.format("DD")}\u65E5`:e.format("MM-DD"):e.isSame(t,"year")?e.format("MM-DD"):e.format("YYYY-MM-DD")},se={class:"w-full h-full p-2 flex flex-col overflow-hidden"},oe={class:"flex flex-wrap"},ie={class:"flex justify-between"},ne={class:"text-white"},ae={key:0,class:"flex-1 overflow-y-auto"},re=["onClick"],le={class:"ml-7 text-sm"},ce={class:"h-24 px-4 mt-4"},ue={class:"end flex items-center text-sm"},de={key:1,class:"flex justify-center items-center text-sm text-gray-600 pt-20"},me=V({__name:"HomeView",setup(e){const{list:t}=q(),s=B(()=>t.value.filter(i=>i.time>=l().startOf("day").unix()&&i.time<=l().endOf("day").unix())),o=B(()=>s.value.reduce((i,n)=>U(i,(n.type===z.Expenses?-1:1)*n.money),0)),{show:u}=L(),c=(i,n)=>{const a=t.value[n-1];if(!a)return I(l.unix(i.time));const r=l.unix(a.time),f=l.unix(i.time);if(!r.isSame(f,"days"))return I(f)},d=(i,n)=>{let a=0;const r=Math.min(t.value.length,i+n);for(let w=i;w<r;w+=1){const F=t.value[w],$=t.value[w-1];(!$||!l.unix($.time).isSame(l.unix(F.time),"days"))&&(a+=1)}const f=56,N=72,A=r-i;return f*a+N*A},y=i=>d(0,i),v=x(),M=()=>{var n;const i=t.value.findIndex(a=>l.unix(a.time).isSame(l(),"date"));(n=v.value)==null||n.scrollTo(y(i))},k=x(!1);K(()=>{setTimeout(()=>{k.value=!0},1e3)});const S=i=>{var n;(n=document.querySelector(`.divider-${i}`))==null||n.scrollIntoView({behavior:"smooth"})},H=x("");return(i,n)=>(p(),h("div",se,[m("div",oe,[m("div",{class:"bg-stone-800 h-20 w-full rounded-lg m-1 sm:flex-1 p-2",onClick:M},[m("div",ie,[m("div",ne,_(i.$t("Today")),1),b(te,{value:g(o),init:"",class:"text-white text-4xl font-bold"},null,8,["value"])])])]),g(t).length?(p(),h("div",ae,[b(G,{ref_key:"listView",ref:v,list:g(t),"get-range-height":d,"footer-height":400,"value-key":"id",class:"main-bill-list mx-1"},{default:C(({item:a,index:r})=>[m("div",null,[c(a,r)?(p(),h("div",{key:0,class:T(["divider flex justify-between items-center px-4 pt-6 pb-3 cursor-pointer",[`divider-${r}`,{animated:k.value}]]),onClick:f=>S(r)},[m("div",le,_(c(a,r)),1)],10,re)):P("",!0),b(Q,{bill:a,class:T([`item-${r}`,{animated:k.value,"to-remove":H.value===a.id}]),onClick:f=>g(u)(a)},null,8,["bill","class","onClick"])])]),footer:C(()=>[m("div",ce,[m("div",ue,_(i.$t("ended")),1)])]),_:1},8,["list"])])):(p(),h("div",de,_(i.$t("nothing-here-add-one-bill")),1))]))}});const Me=R(me,[["__scopeId","data-v-1c07aac7"]]);export{Me as default};
