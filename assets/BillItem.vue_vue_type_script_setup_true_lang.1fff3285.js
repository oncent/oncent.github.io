import{t as K}from"./lodash-es.48fd3169.js";import{m as k,r as b,J as S,c as E,o as P,R as z,w as C,q as _,t as I,F as N,E as L,y as T,M,N as j,u as o,S as D,v as r,G as h,z as $,I as F}from"./@vue.6b771be9.js";import{g as U,b as V,B}from"./index.2678cc06.js";const ne=k({__name:"List",props:{list:null,valueKey:null,loading:{type:Boolean},getRangeHeight:null,remain:{default:20},footerHeight:{default:0},transitionName:null,transitionDuration:null},emits:["reachEnd"],setup(a,{expose:p}){const t=a,y=(e,n)=>t.valueKey===void 0?n:typeof t.valueKey=="function"?t.valueKey(e,n):e[t.valueKey],m=()=>{const e=[];return Array.from({length:Math.ceil(t.list.length/t.remain)},()=>0).forEach((n,s)=>{e.push([(s+1)*t.remain,t.getRangeHeight(s*t.remain+0,t.remain)])}),e},i=b([]);S(()=>{i.value=m()});const x=e=>i.value.findIndex((s,l)=>{const f=(()=>l===0?0:i.value.slice(0,l).reduce((g,H)=>g+H[1],0))();return f<e&&f+s[1]>=e}),c=b(-1),u=E(()=>{const e=i.value.reduce((f,g)=>f+g[1],0)+t.footerHeight;if(c.value<2)return{startIndex:0,list:t.list.slice(0,t.remain*3),style:`padding-top:${0}px; height:${e}px`};const n=i.value[c.value-2][0],s=Math.min(t.list.length,n+t.remain*3),l=i.value.slice(0,c.value-1).reduce((f,g)=>f+g[1],0);return{startIndex:n,list:t.list.slice(n,s),style:`padding-top:${l}px; height:${e}px`}}),v=e=>u.value.startIndex+e,d=b(),w=K(e=>{const n=e.target;if(!n||!d.value)return;const s=d.value.offsetTop-n.offsetTop,l=n.scrollTop-s;c.value=x(l)},50);P(()=>{var e,n;(n=(e=d.value)==null?void 0:e.parentElement)==null||n.addEventListener("scroll",w),z(()=>{var s,l;(l=(s=d.value)==null?void 0:s.parentElement)==null||l.removeEventListener("scroll",w)})});const R=b();return C(()=>t.list.length,()=>{R.value=t.transitionName}),p({scrollTo:e=>{var n,s;(s=(n=d.value)==null?void 0:n.parentElement)==null||s.scrollTo({top:e,behavior:"smooth"})}}),(e,n)=>(_(),I("div",{style:D(o(u).style),class:"list-view overflow-hidden",ref_key:"listEl",ref:d},[(_(!0),I(N,null,L(o(u).list,(s,l)=>T(e.$slots,"default",M(j({key:y(s,v(l))},{item:s,index:v(l)})),()=>[r("div",null,h(s),1)])),128)),T(e.$slots,"footer")],4))}}),q={class:"bill-item flex justify-between items-center px-4 py-4 buttoned cursor-pointer"},A={class:"flex items-center overflow-hidden"},G={class:"rounded-full bg-white border w-10 h-10 flex items-center justify-center"},J={class:"flex-1 flex flex-col px-4 overflow-hidden"},O={class:"flex text-md font-semibold"},Q={class:"flex text-xs"},W=r("div",{class:"px-1"},"|",-1),X={class:"truncate"},se=k({__name:"BillItem",props:{bill:null},setup(a){const p=a,t=E(()=>U(p.bill.categoryId)),y=E(()=>V(p.bill.creatorId));return(m,i)=>{var x,c,u,v;return _(),I("div",q,[r("div",A,[r("div",G,[r("i",{class:$([(x=o(t))==null?void 0:x.icon])},null,2)]),r("div",J,[r("div",O,[r("div",null,h(o(t)?m.$t(o(t).name):""),1)]),r("div",Q,[r("div",null,h((c=o(y))!=null&&c.me?m.$t("me"):(v=(u=o(y))==null?void 0:u.name)!=null?v:m.$t("unknown-user")),1),a.bill.comment?(_(),I(N,{key:0},[W,r("div",X,h(a.bill.comment),1)],64)):F("",!0)])])]),r("div",{class:$(["text-lg font-bold truncate flex-shrink-0 text-right",{"text-red-700":a.bill.type===o(B).Expenses,"text-green-900":a.bill.type===o(B).Income}])},h(a.bill.money),3)])}}});export{ne as _,se as a};
