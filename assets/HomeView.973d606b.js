var V=Object.defineProperty;var A=(t,e,s)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var k=(t,e,s)=>(A(t,typeof e!="symbol"?e+"":e,s),s);import{u as O,B as F,a as j,_ as E}from"./index.e527a943.js";import{_ as S,a as T}from"./BillItem.vue_vue_type_script_setup_true_lang.241e3027.js";import{m as Y,r as w,w as q,q as f,t as y,G as v,c as B,o as z,v as c,k as $,u as p,A as R,B as C,z as D,I as G}from"./@vue.aa17ec7c.js";import{d as x}from"./dayjs.8eec1a0d.js";import"./vue-router.835b731e.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.9aab9800.js";import"./vue-i18n.bcf46dc7.js";import"./@intlify.03657722.js";import"./lodash-es.94cbcf30.js";const L=(t,e,s,i)=>s*t/i+e,Q={easeIn(t,e,s,i){return s*(t/=i)*t*t*t+e},easeOut(t,e,s,i){return-s*((t=t/i-1)*t*t*t-1)+e},easeInOut(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e}};class J{constructor(e,s,i,l=()=>{},a=L){k(this,"runner");this.from=e,this.to=s,this.duration=i,this.callback=l,this.curve=a}start(){let s=0,i=this.from;const l=()=>{const a=this.curve(s,this.from,this.to-this.from,this.duration);if(s>this.duration){this.callback(this.to);return}s+=1/60,i=a,this.callback(i),this.runner=window.requestAnimationFrame(l)};l()}stop(){this.runner!==void 0&&window.cancelAnimationFrame(this.runner)}}const K={class:"font-[Helvetica Neue]"},P=Y({__name:"DynamicNumber",props:{value:null,init:{type:Boolean},toFixed:{default:1},duration:{default:2}},setup(t){const e=t,s=w("0"),i=w(),l=(r,_)=>new J(r,_,e.duration,m=>{s.value=`${m>0?"+":"-"} ${Math.abs(m).toFixed(e.toFixed)}`},Q.easeOut),a=()=>{var r;(r=i.value)==null||r.stop(),i.value=l(Number(s.value.replace(" ","")),e.value),i.value.start()};return e.init&&a(),q(()=>e.value,()=>{a()}),(r,_)=>(f(),y("div",K,v(s.value),1))}}),U={class:"w-full h-full p-2 overflow-y-auto"},W={class:"flex flex-wrap"},X={class:"bg-stone-800 h-20 w-full rounded-lg m-1 sm:flex-1 p-2"},Z={class:"flex justify-between"},ee={class:"text-white"},te={class:"ml-7 text-sm"},se={class:"h-24 px-4 mt-4"},ie={class:"end flex items-center text-sm"},oe={key:1,class:"flex justify-center items-center text-sm text-gray-600 pt-20"},ne=Y({__name:"HomeView",setup(t){const{list:e}=O(),s=B(()=>e.value.filter(o=>o.time>=x().startOf("day").unix()&&o.time<=x().endOf("day").unix())),i=B(()=>s.value.reduce((o,u)=>o+(u.type===F.Expenses?-1:1)*u.money,0)),{show:l}=j(),a=24*60*60,r=(o,u)=>{const n=e.value[u-1];if(!n)return x.unix(o.time).format("YYYY-MM-DD");if(n.time-o.time>=a)return x.unix(o.time).format("YYYY-MM-DD")},_=(o,u)=>{let n=0;const d=Math.min(e.value.length,o+u);for(let h=o;h<d;h+=1){const N=e.value[h],b=e.value[h-1];(!b||b.time-N.time>=a)&&(n+=1)}const g=56,I=72,M=d-o;return g*n+I*M},m=w(!1);z(()=>{setTimeout(()=>{m.value=!0},3e3)});const H=w("");return(o,u)=>(f(),y("div",U,[c("div",W,[c("div",X,[c("div",Z,[c("div",ee,v(o.$t("Today")),1),$(P,{value:p(i),init:"",class:"text-white text-4xl font-bold"},null,8,["value"])])])]),p(e).length?(f(),R(S,{key:0,list:p(e),"get-range-height":_,"footer-height":400,"value-key":"id",class:"main-bill-list mx-1"},{default:C(({item:n,index:d})=>[c("div",null,[r(n,d)?(f(),y("div",{key:0,class:D(["divider flex justify-between items-center px-4 pt-6 pb-3 cursor-pointer",[`divider-${d}`,{animated:m.value}]])},[c("div",te,v(r(n,d)),1)],2)):G("",!0),$(T,{bill:n,class:D([`item-${d}`,{animated:m.value,"to-remove":H.value===n.id}]),onClick:g=>p(l)(n)},null,8,["bill","class","onClick"])])]),footer:C(()=>[c("div",se,[c("div",ie,v(o.$t("ended")),1)])]),_:1},8,["list"])):(f(),y("div",oe,v(o.$t("nothing-here-add-one-bill")),1))]))}});const xe=E(ne,[["__scopeId","data-v-e501d957"]]);export{xe as default};
