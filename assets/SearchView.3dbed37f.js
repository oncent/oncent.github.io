import{m as E,q as $,t as b,y as P,v as e,z as x,P as q,Q as G,r as m,c as Q,w as Y,J as R,k as _,B as p,u as r,G as o,V as F,W as N,F as W,I as A}from"./@vue.aa17ec7c.js";import{_ as J,B as S,d as K,c as O,u as X,e as Z,g as H,a as ee,b as te}from"./index.3db5b820.js";import{_ as T}from"./Select.vue_vue_type_style_index_0_lang.150988b9.js";import{_ as z}from"./DateTime.vue_vue_type_script_setup_true_lang.5226095e.js";import{d as I}from"./dayjs.8eec1a0d.js";import{_ as se}from"./List.vue_vue_type_script_setup_true_lang.18ef27f4.js";import"./vue-router.835b731e.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.9aab9800.js";import"./vue-i18n.bcf46dc7.js";import"./@intlify.03657722.js";import"./lodash-es.94cbcf30.js";const le=v=>(q("data-v-914c42f6"),v=v(),G(),v),oe={class:"clearable flex items-center"},ie=le(()=>e("i",{class:"icon-close icon-xs opacity-30"},null,-1)),ne=[ie],ae=E({__name:"Clearable",props:{visible:{type:Boolean}},emits:["clear"],setup(v){return(C,a)=>($(),b("div",oe,[P(C.$slots,"default",{},void 0,!0),e("div",{class:x(["close buttoned rounded-full",{visible:v.visible}]),onClick:a[0]||(a[0]=w=>C.$emit("clear"))},ne,2)]))}});const B=J(ae,[["__scopeId","data-v-914c42f6"]]),k=v=>(q("data-v-041c5e04"),v=v(),G(),v),de={class:"pt-4 pb-2"},ue={class:"flex justify-between py-2"},ce={class:"flex-1 flex justify-between"},re={class:"flex"},ve={class:"flex justify-between py-2"},fe={class:"flex items-center px-2"},pe=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-align-middle icon-xs"})],-1)),me={class:"px-2"},_e={class:"flex rounded-full shadow overflow-hidden"},xe={class:"flex justify-between py-2"},ye={class:"flex items-center px-2"},he=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-credit-card icon-xs"})],-1)),we={class:"px-2 whitespace-nowrap"},$e={class:"flex"},be={class:"rounded-full shadow px-2 buttoned mx-2 flex items-center"},ge=k(()=>e("div",{class:"px-2"},"-",-1)),Ce={class:"rounded-full shadow px-2 buttoned mx-2"},Ve={class:"flex justify-between py-2"},Ie={class:"flex items-center px-2"},ke=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-user-list icon-xs"})],-1)),je={class:"px-2"},Be={class:"flex"},Ue={class:"shadow buttoned px-4 max-w-[160px] rounded-full h-full truncate mx-2 py-1"},Se={class:"flex justify-between py-2"},De={class:"flex items-center px-2"},Me=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-carousel icon-xs"})],-1)),Ye={class:"px-2"},Fe={class:"flex"},Ne={class:"shadow buttoned px-4 max-w-[160px] rounded-full h-full truncate mx-2 py-1"},Ee=["onClick"],He={class:"w-8 flex justify-center"},Te={class:"mx-2"},ze=k(()=>e("div",null,[e("i",{class:"icon-play-list-search"})],-1)),qe={class:"px-2"},Ge=E({__name:"BillFilter",props:{modelValue:null},emits:["update:modelValue"],setup(v,{emit:C}){const a=m(!1),w=()=>{a.value=!a.value},g=(l,t)=>{l.value=t.value;const s=Y(()=>t.value.length,h=>{h>0&&(l.value=t.value,s())});Y(()=>l.value,(h,U)=>{h.length===0&&(U.length===1?l.value=[U[0]]:l.value=[t.value[0]])})},D=l=>l.isValid()?l.format("YYYY-MM-DD"):"early",M=l=>l.isValid()?l.format("YYYY-MM-DD"):"later",y=m(I.unix(-1/0)),u=m(I.unix(1/0)),n=m(-1/0),i=m(1/0),d=m(),c=m([]),{allUsers:V}=K();g(c,V);const f=m([]),j=Q(()=>O.filter(l=>d.value===void 0||l.type===d.value));g(f,j),Y(d,()=>{f.value=[...j.value]});const L=()=>{y.value=I.unix(-1/0),u.value=I.unix(1/0),n.value=-1/0,i.value=1/0,d.value=void 0,c.value=V.value,f.value=[...j.value]};return R(()=>{var l,t;C("update:modelValue",{start:(l=y.value)!=null&&l.isValid()?y.value:void 0,end:(t=u.value)!=null&&t.isValid()?y.value:void 0,max:i.value,min:n.value,type:d.value,users:c.value.map(s=>s.id),categories:f.value.map(s=>s.id)})}),(l,t)=>($(),b("div",de,[e("div",{class:x(["filter-field transition-all rounded",[a.value?"h-[252px] opacity-100":"h-0 overflow-hidden opacity-0"]])},[e("div",ue,[e("div",ce,[e("div",re,[_(B,{visible:!0,class:"rounded-full shadow px-2 buttoned truncate py-2",onClear:t[1]||(t[1]=s=>y.value=r(I).unix(-1/0))},{default:p(()=>[_(z,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),"display-formatter":D},{icon:p(()=>[e("div",null,o(l.$t("from"))+":",1)]),_:1},8,["modelValue"])]),_:1})]),e("div",null,[_(B,{visible:!0,class:"rounded-full shadow px-2 buttoned truncate py-2",onClear:t[3]||(t[3]=s=>u.value=r(I).unix(1/0))},{default:p(()=>[_(z,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=s=>u.value=s),"display-formatter":M},{icon:p(()=>[e("div",null,o(l.$t("to"))+":",1)]),_:1},8,["modelValue"])]),_:1})])])]),e("div",ve,[e("div",fe,[pe,e("div",me,o(l.$t("type"))+":",1)]),e("div",_e,[e("div",{class:x(["w-80px text-center buttoned py-1",{"!bg-stone-700 !text-white":d.value===r(S).Income}]),onClick:t[4]||(t[4]=s=>d.value=r(S).Income)},o(l.$t("income")),3),e("div",{class:x(["w-80px text-center buttoned py-1",{"!bg-stone-700 !text-white":d.value===r(S).Expenses}]),onClick:t[5]||(t[5]=s=>d.value=r(S).Expenses)},o(l.$t("expenses")),3),e("div",{class:x(["w-80px text-center buttoned py-1",{"!bg-stone-700 !text-white":d.value===void 0}]),onClick:t[6]||(t[6]=s=>d.value=void 0)},o(l.$t("all")),3)])]),e("div",xe,[e("div",ye,[he,e("div",we,o(l.$t("range"))+":",1)]),e("div",$e,[e("div",be,[_(B,{visible:!0,onClear:t[9]||(t[9]=s=>n.value=-1/0)},{default:p(()=>[n.value!==-1/0?F(($(),b("input",{key:0,"onUpdate:modelValue":t[7]||(t[7]=s=>n.value=s),type:"number",class:"max-w-50px bg-transparent focus:border-none focus:outline-none text-right py-1",inputmode:"decimal"},null,512)),[[N,n.value]]):($(),b("div",{key:1,class:"py-1",onClick:t[8]||(t[8]=s=>n.value=0)},o(l.$t("unlimited")),1))]),_:1})]),ge,e("div",Ce,[_(B,{visible:!0,onClear:t[12]||(t[12]=s=>i.value=1/0)},{default:p(()=>[i.value!==1/0?F(($(),b("input",{key:0,"onUpdate:modelValue":t[10]||(t[10]=s=>i.value=s),type:"number",class:"max-w-50px bg-transparent focus:border-none focus:outline-none text-right py-1",inputmode:"decimal"},null,512)),[[N,i.value]]):($(),b("div",{key:1,class:"py-1",onClick:t[11]||(t[11]=s=>i.value=0)},o(l.$t("unlimited")),1))]),_:1})])])]),e("div",Ve,[e("div",Ie,[ke,e("div",je,o(l.$t("users"))+":",1)]),e("div",Be,[_(T,{modelValue:c.value,"onUpdate:modelValue":t[13]||(t[13]=s=>c.value=s),list:r(V),multiple:"","value-key":"id"},{default:p(({allSelected:s})=>[e("div",Ue,o(s?l.$t("all"):c.value.length===0?"None":c.value.map(h=>h.name).join(",")),1)]),_:1},8,["modelValue","list"])])]),e("div",Se,[e("div",De,[Me,e("div",Ye,o(l.$t("categories"))+":",1)]),e("div",Fe,[_(T,{modelValue:f.value,"onUpdate:modelValue":t[14]||(t[14]=s=>f.value=s),list:r(j),multiple:"","value-key":"id"},{default:p(({allSelected:s})=>[e("div",Ne,o(s?l.$t("all"):f.value.length===0?"None":f.value.map(h=>h.name).join(",")),1)]),option:p(({item:s,selected:h,select:U})=>[e("div",{class:x(["p-2 buttoned flex items-center",{"!bg-gray-700 text-white":h}]),onClick:dt=>U()},[e("div",He,[e("i",{class:x([s.icon])},null,2)]),e("div",Te,o(s.name),1)],10,Ee)]),_:1},8,["modelValue","list"])])])],2),e("div",{class:x(["flex justify-between py-2",{"border-t":a.value}])},[e("div",null,[e("div",{class:x(["buttoned rounded-sm px-2 text-gray-600",{"opacity-0 pointer-events-none":!a.value}]),onClick:L},o(l.$t("reset")),3)]),e("div",{class:"flex items-center rounded-sm buttoned px-2",onClick:w},[ze,e("div",qe,o(l.$t("filter")),1)])],2)]))}});const Je=J(Ge,[["__scopeId","data-v-041c5e04"]]),Le={class:"w-full h-full flex justify-center p-2"},Pe={class:"h-full w-full mx-2 max-w-[600px] flex flex-col"},Qe={class:"search w-full flex justify-center pt-4"},Re={class:"w-full h-10 shadow-md rounded-sm flex items-center px-4 focus-within:shadow-lg"},We={class:"flex-1"},Ae=e("i",{class:"icon-search"},null,-1),Ke=[Ae],Oe={class:"flex-1 flex flex-col overflow-hidden"},Xe={class:"text-sm text-gray-500"},Ze={class:"flex-1 divide-y overflow-y-auto"},et=["onClick"],tt={class:"flex items-center"},st={class:"bg-white border w-10 h-10 flex items-center justify-center"},lt={class:"flex flex-col px-4"},ot={class:"flex text-md font-semibold"},it={class:"flex text-xs"},nt=e("div",{class:"px-1"},"|",-1),at={class:"text-lg font-bold"},bt=E({__name:"SearchView",setup(v){const{list:C}=X(),a=m(""),w=m([]),g=m(),D=()=>{if(!a.value||!g.value){w.value=[];return}const u=g.value;w.value=C.value.filter(n=>Z(n,{...u,comment:a.value}))},M=(u,n)=>{const c=Math.min(w.value.length,u+n)-u;return 72*c},{show:y}=te();return(u,n)=>($(),b("div",Le,[e("div",Pe,[e("div",Qe,[e("div",Re,[e("div",We,[_(B,{visible:a.value.length>0,onClear:n[1]||(n[1]=i=>a.value="")},{default:p(()=>[F(e("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>a.value=i),type:"text",class:"w-full bg-transparent focus:border-none focus:outline-none"},null,512),[[N,a.value]])]),_:1},8,["visible"])]),e("div",{class:"buttoned p-3 rounded-full",onClick:D},Ke)])]),e("div",Oe,[_(Je,{modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=i=>g.value=i)},null,8,["modelValue"]),e("div",Xe,o(u.$t("total"))+": "+o(w.value.length),1),e("div",Ze,[_(se,{list:w.value,"value-key":"id","get-range-height":M,"footer-height":96},{default:p(({item:i})=>{var d,c,V,f;return[e("div",{class:"bill-item flex justify-between items-center px-4 py-4 buttoned cursor-pointer",onClick:j=>r(y)(i)},[e("div",tt,[e("div",st,[e("i",{class:x([(d=r(H)(i.categoryId))==null?void 0:d.icon])},null,2)]),e("div",lt,[e("div",ot,[e("div",null,o((c=r(H)(i.categoryId))==null?void 0:c.name),1)]),e("div",it,[e("div",null,o((f=(V=r(ee)(i.creatorId))==null?void 0:V.name)!=null?f:"unknown user"),1),i.comment?($(),b(W,{key:0},[nt,e("div",null,o(i.comment),1)],64)):A("",!0)])])]),e("div",at,o(i.money),1)],8,et)]}),_:1},8,["list"])])])])]))}});export{bt as default};
