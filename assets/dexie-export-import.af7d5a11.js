import{D as Ae}from"./dexie.a92c4e2b.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _e(y,d,s,l){function b(u){return u instanceof s?u:new s(function(i){i(u)})}return new(s||(s=Promise))(function(u,i){function U(B){try{a(l.next(B))}catch(H){i(H)}}function x(B){try{a(l.throw(B))}catch(H){i(H)}}function a(B){B.done?u(B.value):b(B.value).then(U,x)}a((l=l.apply(y,d||[])).next())})}function Be(y,d){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},l,b,u,i;return i={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function U(a){return function(B){return x([a,B])}}function x(a){if(l)throw new TypeError("Generator is already executing.");for(;s;)try{if(l=1,b&&(u=a[0]&2?b.return:a[0]?b.throw||((u=b.return)&&u.call(b),0):b.next)&&!(u=u.call(b,a[1])).done)return u;switch(b=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,b=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){s.label=a[1];break}if(a[0]===6&&s.label<u[1]){s.label=u[1],u=a;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(a);break}u[2]&&s.ops.pop(),s.trys.pop();continue}a=d.call(y,s)}catch(B){a=[6,B],b=0}finally{l=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function ot(y){var d=[y.schema.primKey].concat(y.schema.indexes);return d.map(function(s){return s.src}).join(",")}function st(y){for(var d={},s=0,l=y.tables;s<l.length;s++){var b=l[s];d[b.name]=b.schema}return d}function Xe(y,d){return new Promise(function(s,l){var b=new FileReader;b.onabort=function(u){return l(new Error("file read aborted"))},b.onerror=function(u){return l(u.target.error)},b.onload=function(u){return s(u.target.result)},d==="binary"?b.readAsArrayBuffer(y):b.readAsText(y)})}function Qe(y,d){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var s=new FileReaderSync,l=d==="binary"?s.readAsArrayBuffer(y):s.readAsText(y);return l}var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function He(y,d){return d={exports:{}},y(d,d.exports),d.exports}var Ve=He(function(y,d){(function(s,l){y.exports=l()})(Ye,function(){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l=function(){return function(v,n){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return function(h,c){var $=[],G=!0,pe=!1,te=void 0;try{for(var j,w=h[Symbol.iterator]();!(G=(j=w.next()).done)&&($.push(j.value),!c||$.length!==c);G=!0);}catch(P){pe=!0,te=P}finally{try{!G&&w.return&&w.return()}finally{if(pe)throw te}}return $}(v,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(v){if(Array.isArray(v)){for(var n=0,e=Array(v.length);n<v.length;n++)e[n]=v[n];return e}return Array.from(v)},u=Object.keys,i=Array.isArray,U={}.toString,x=Object.getPrototypeOf,a={}.hasOwnProperty,B=a.toString,H=["type","replaced","iterateIn","iterateUnsetNumeric"];function we(v,n){return O.isObject(v)&&typeof v.then=="function"&&(!n||typeof v.catch=="function")}function se(v){return U.call(v).slice(8,-1)}function D(v,n){if(!v||(v===void 0?"undefined":s(v))!=="object")return!1;var e=x(v);if(!e)return!1;var h=a.call(e,"constructor")&&e.constructor;return typeof h!="function"?n===null:typeof h=="function"&&n!==null&&B.call(h)===B.call(n)}function Y(v){return!(!v||se(v)!=="Object")&&(!x(v)||D(v,Object))}function W(v){return v&&(v===void 0?"undefined":s(v))==="object"}function O(v){var n=[],e=[],h={},c=this.types={},$=this.stringify=function(j,w,P,J){J=Object.assign({},v,J,{stringification:!0});var X=pe(j,null,J);return i(X)?JSON.stringify(X[0],w,P):X.then(function(R){return JSON.stringify(R,w,P)})};this.stringifySync=function(j,w,P,J){return $(j,w,P,Object.assign({},{throwOnBadSyncType:!0},J,{sync:!0}))},this.stringifyAsync=function(j,w,P,J){return $(j,w,P,Object.assign({},{throwOnBadSyncType:!0},J,{sync:!1}))};var G=this.parse=function(j,w,P){return P=Object.assign({},v,P,{parse:!0}),te(JSON.parse(j,w),P)};this.parseSync=function(j,w,P){return G(j,w,Object.assign({},{throwOnBadSyncType:!0},P,{sync:!0}))},this.parseAsync=function(j,w,P){return G(j,w,Object.assign({},{throwOnBadSyncType:!0},P,{sync:!1}))},this.specialTypeNames=function(j,w){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P.returnTypeNames=!0,this.encapsulate(j,w,P)},this.rootTypeName=function(j,w){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P.iterateNone=!0,this.encapsulate(j,w,P)};var pe=this.encapsulate=function(j,w,P){var J=(P=Object.assign({sync:!0},v,P)).sync,X={},R=[],he=[],ne=[],de=!(P&&"cyclic"in P)||P.cyclic,re=P.encapsulateObserver,ie=o("",j,de,w||{},ne);function r(f){var p=Object.values(X);if(P.iterateNone)return p.length?p[0]:O.getJSONType(f);if(p.length){if(P.returnTypeNames)return[].concat(b(new Set(p)));f&&Y(f)&&!f.hasOwnProperty("$types")?f.$types=X:f={$:f,$types:{$:X}}}else W(f)&&f.hasOwnProperty("$types")&&(f={$:f,$types:!0});return!P.returnTypeNames&&f}return ne.length?J&&P.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function f(p,T){return Promise.all(T.map(function(A){return A[1].p})).then(function(A){return Promise.all(A.map(function(V){var E=[],C=T.splice(0,1)[0],g=l(C,7),k=g[0],M=g[2],m=g[3],ae=g[4],oe=g[5],Ee=g[6],ye=o(k,V,M,m,E,!0,Ee),q=D(ye,L);return k&&q?ye.p.then(function(be){return ae[oe]=be,f(p,E)}):(k?ae[oe]=ye:p=q?ye.p:ye,f(p,E))}))}).then(function(){return p})}(ie,ne)).then(r):!J&&P.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():P.stringification&&J?[r(ie)]:J?r(ie):Promise.resolve(r(ie));function t(f,p,T){Object.assign(f,p);var A=H.map(function(V){var E=f[V];return delete f[V],E});T(),H.forEach(function(V,E){f[V]=A[E]})}function o(f,p,T,A,V,E,C){var g=void 0,k={},M=p===void 0?"undefined":s(p),m=re?function(N){var K=C||A.type||O.getJSONType(p);re(Object.assign(N||k,{keypath:f,value:p,cyclic:T,stateObj:A,promisesData:V,resolvingTypesonPromise:E,awaitingTypesonPromise:D(p,L)},K!==void 0?{type:K}:{}))}:null;if(M in{string:1,boolean:1,number:1,undefined:1})return p===void 0||M==="number"&&(isNaN(p)||p===-1/0||p===1/0)?(g=S(f,p,A,V,!1,E,m))!==p&&(k={replaced:g}):g=p,m&&m(),g;if(p===null)return m&&m(),p;if(T&&!A.iterateIn&&!A.iterateUnsetNumeric){var ae=R.indexOf(p);if(!(ae<0))return X[f]="#",m&&m({cyclicKeypath:he[ae]}),"#"+he[ae];T===!0&&(R.push(p),he.push(f))}var oe=Y(p),Ee=i(p),ye=(oe||Ee)&&(!n.length||A.replaced)||A.iterateIn?p:S(f,p,A,V,oe||Ee,null,m),q=void 0;if(ye!==p?(g=ye,k={replaced:ye}):Ee||A.iterateIn==="array"?(q=new Array(p.length),k={clone:q}):oe||A.iterateIn==="object"?k={clone:q={}}:(f===""&&D(p,L)&&V.push([f,p,T,A,void 0,void 0,A.type]),g=p),m&&m(),P.iterateNone)return q||g;if(!q)return g;if(A.iterateIn){var be=function(K){var I={ownKeys:p.hasOwnProperty(K)};t(A,I,function(){var Z=f+(f?".":"")+ee(K),ue=o(Z,p[K],!!T,A,V,E);D(ue,L)?V.push([Z,ue,!!T,A,q,K,A.type]):ue!==void 0&&(q[K]=ue)})};for(var Ne in p)be(Ne);m&&m({endIterateIn:!0,end:!0})}else u(p).forEach(function(N){var K=f+(f?".":"")+ee(N);t(A,{ownKeys:!0},function(){var I=o(K,p[N],!!T,A,V,E);D(I,L)?V.push([K,I,!!T,A,q,N,A.type]):I!==void 0&&(q[N]=I)})}),m&&m({endIterateOwn:!0,end:!0});if(A.iterateUnsetNumeric){for(var ve=p.length,Re=function(K){if(!(K in p)){var I=f+(f?".":"")+K;t(A,{ownKeys:!1},function(){var Z=o(I,void 0,!!T,A,V,E);D(Z,L)?V.push([I,Z,!!T,A,q,K,A.type]):Z!==void 0&&(q[K]=Z)})}},_=0;_<ve;_++)Re(_);m&&m({endIterateUnsetNumeric:!0,end:!0})}return q}function S(f,p,T,A,V,E,C){for(var g=V?n:e,k=g.length;k--;){var M=g[k];if(M.test(p,T)){var m=M.type;if(h[m]){var ae=X[f];X[f]=ae?[m].concat(ae):m}return Object.assign(T,{type:m,replaced:!0}),!J&&M.replaceAsync||M.replace?(C&&C({replacing:!0}),o(f,M[J||!M.replaceAsync?"replace":"replaceAsync"](p,T),de&&"readonly",T,A,E,m)):(C&&C({typeDetected:!0}),o(f,p,de&&"readonly",T,A,E,m))}}return p}};this.encapsulateSync=function(j,w,P){return pe(j,w,Object.assign({},{throwOnBadSyncType:!0},P,{sync:!0}))},this.encapsulateAsync=function(j,w,P){return pe(j,w,Object.assign({},{throwOnBadSyncType:!0},P,{sync:!1}))};var te=this.revive=function(j,w){var P=(w=Object.assign({sync:!0},v,w)).sync,J=j&&j.$types,X=!0;if(!J)return j;if(J===!0)return j.$;J.$&&Y(J.$)&&(j=j.$,J=J.$,X=!1);var R=[],he={},ne=function de(re,ie,r,t,o,S){if(!(X&&re==="$types")){var f=J[re];if(i(ie)||Y(ie)){var p=i(ie)?new Array(ie.length):{};for(u(ie).forEach(function(m){var ae=de(re+(re?".":"")+ee(m),ie[m],r||p,t,p,m);D(ae,le)?p[m]=void 0:ae!==void 0&&(p[m]=ae)}),ie=p;R.length;){var T=l(R[0],4),A=T[0],V=T[1],E=T[2],C=T[3],g=F(A,V);if(D(g,le))E[C]=void 0;else{if(g===void 0)break;E[C]=g}R.splice(0,1)}}if(!f)return ie;if(f==="#"){var k=F(r,ie.substr(1));return k===void 0&&R.push([r,ie.substr(1),o,S]),k}var M=t.sync;return[].concat(f).reduce(function(m,ae){var oe=h[ae];if(!oe)throw new Error("Unregistered type: "+ae);return oe[M&&oe.revive?"revive":!M&&oe.reviveAsync?"reviveAsync":"revive"](m,he)},ie)}}("",j,null,w);return we(ne=D(ne,le)?void 0:ne)?P&&w.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():ne:!P&&w.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():P?ne:Promise.resolve(ne)};this.reviveSync=function(j,w){return te(j,Object.assign({},{throwOnBadSyncType:!0},w,{sync:!0}))},this.reviveAsync=function(j,w){return te(j,Object.assign({},{throwOnBadSyncType:!0},w,{sync:!1}))},this.register=function(j,w){return w=w||{},[].concat(j).forEach(function P(J){if(i(J))return J.map(P);J&&u(J).forEach(function(X){if(X==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(O.JSON_TYPES.includes(X))throw new TypeError("Plain JSON object types are reserved as type names");var R=J[X],he=R.testPlainObjects?n:e,ne=he.filter(function(t){return t.type===X});if(ne.length&&(he.splice(he.indexOf(ne[0]),1),delete h[X],delete c[X]),R){if(typeof R=="function"){var de=R;R={test:function(o){return o&&o.constructor===de},replace:function(o){return fe({},o)},revive:function(o){return fe(Object.create(de.prototype),o)}}}else i(R)&&(R={test:R[0],replace:R[1],revive:R[2]});var re={type:X,test:R.test.bind(R)};R.replace&&(re.replace=R.replace.bind(R)),R.replaceAsync&&(re.replaceAsync=R.replaceAsync.bind(R));var ie=typeof w.fallback=="number"?w.fallback:w.fallback?0:1/0;if(R.testPlainObjects?n.splice(ie,0,re):e.splice(ie,0,re),R.revive||R.reviveAsync){var r={};R.revive&&(r.revive=R.revive.bind(R)),R.reviveAsync&&(r.reviveAsync=R.reviveAsync.bind(R)),h[X]=r}c[X]=R}})}),this}}function fe(v,n){return u(n).map(function(e){v[e]=n[e]}),v}function ee(v){return v.replace(/~/g,"~0").replace(/\./g,"~1")}function Q(v){return v.replace(/~1/g,".").replace(/~0/g,"~")}function F(v,n){if(n==="")return v;var e=n.indexOf(".");if(e>-1){var h=v[Q(n.substr(0,e))];return h===void 0?void 0:F(h,n.substr(e+1))}return v[Q(n)]}function le(){}function L(v){this.p=new Promise(v)}return L.prototype.then=function(v,n){var e=this;return new L(function(h,c){e.p.then(function($){h(v?v($):$)},function($){e.p.catch(function(G){return n?n(G):Promise.reject(G)}).then(h,c)})})},L.prototype.catch=function(v){return this.then(null,v)},L.resolve=function(v){return new L(function(n){n(v)})},L.reject=function(v){return new L(function(n,e){e(v)})},["all","race"].map(function(v){L[v]=function(n){return new L(function(e,h){Promise[v](n.map(function(c){return c.p})).then(e,h)})}}),O.Undefined=le,O.Promise=L,O.isThenable=we,O.toStringTag=se,O.hasConstructorOf=D,O.isObject=W,O.isPlainObject=Y,O.isUserObject=function v(n){if(!n||se(n)!=="Object")return!1;var e=x(n);return!e||D(n,Object)||v(e)},O.escapeKeyPathComponent=ee,O.unescapeKeyPathComponent=Q,O.getByKeyPath=F,O.getJSONType=function(v){return v===null?"null":i(v)?"array":v===void 0?"undefined":s(v)},O.JSON_TYPES=["null","boolean","number","string","array","object"],O})}),ut=He(function(y,d){(function(s,l){y.exports=l()})(Ye,function(){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(S,f){var p=[],T=!0,A=!1,V=void 0;try{for(var E,C=S[Symbol.iterator]();!(T=(E=C.next()).done)&&(p.push(E.value),!f||p.length!==f);T=!0);}catch(g){A=!0,V=g}finally{try{!T&&C.return&&C.return()}finally{if(A)throw V}}return p}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(r){if(Array.isArray(r)){for(var t=0,o=Array(r.length);t<r.length;t++)o[t]=r[t];return o}return Array.from(r)},u=Object.keys,i=Array.isArray,U={}.toString,x=Object.getPrototypeOf,a={}.hasOwnProperty,B=a.toString,H=["type","replaced","iterateIn","iterateUnsetNumeric"];function we(r,t){return O.isObject(r)&&typeof r.then=="function"&&(!t||typeof r.catch=="function")}function se(r){return U.call(r).slice(8,-1)}function D(r,t){if(!r||(r===void 0?"undefined":s(r))!=="object")return!1;var o=x(r);if(!o)return!1;var S=a.call(o,"constructor")&&o.constructor;return typeof S!="function"?t===null:typeof S=="function"&&t!==null&&B.call(S)===B.call(t)}function Y(r){return!(!r||se(r)!=="Object")&&(!x(r)||D(r,Object))}function W(r){return r&&(r===void 0?"undefined":s(r))==="object"}function O(r){var t=[],o=[],S={},f=this.types={},p=this.stringify=function(E,C,g,k){k=Object.assign({},r,k,{stringification:!0});var M=A(E,null,k);return i(M)?JSON.stringify(M[0],C,g):M.then(function(m){return JSON.stringify(m,C,g)})};this.stringifySync=function(E,C,g,k){return p(E,C,g,Object.assign({},{throwOnBadSyncType:!0},k,{sync:!0}))},this.stringifyAsync=function(E,C,g,k){return p(E,C,g,Object.assign({},{throwOnBadSyncType:!0},k,{sync:!1}))};var T=this.parse=function(E,C,g){return g=Object.assign({},r,g,{parse:!0}),V(JSON.parse(E,C),g)};this.parseSync=function(E,C,g){return T(E,C,Object.assign({},{throwOnBadSyncType:!0},g,{sync:!0}))},this.parseAsync=function(E,C,g){return T(E,C,Object.assign({},{throwOnBadSyncType:!0},g,{sync:!1}))},this.specialTypeNames=function(E,C){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return g.returnTypeNames=!0,this.encapsulate(E,C,g)},this.rootTypeName=function(E,C){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return g.iterateNone=!0,this.encapsulate(E,C,g)};var A=this.encapsulate=function(E,C,g){var k=(g=Object.assign({sync:!0},r,g)).sync,M={},m=[],ae=[],oe=[],Ee=!(g&&"cyclic"in g)||g.cyclic,ye=g.encapsulateObserver,q=ve("",E,Ee,C||{},oe);function be(_){var N=Object.values(M);if(g.iterateNone)return N.length?N[0]:O.getJSONType(_);if(N.length){if(g.returnTypeNames)return[].concat(b(new Set(N)));_&&Y(_)&&!_.hasOwnProperty("$types")?_.$types=M:_={$:_,$types:{$:M}}}else W(_)&&_.hasOwnProperty("$types")&&(_={$:_,$types:!0});return!g.returnTypeNames&&_}return oe.length?k&&g.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function _(N,K){return Promise.all(K.map(function(I){return I[1].p})).then(function(I){return Promise.all(I.map(function(Z){var ue=[],xe=K.splice(0,1)[0],ce=l(xe,7),Oe=ce[0],Te=ce[2],z=ce[3],ge=ce[4],je=ce[5],Fe=ce[6],Pe=ve(Oe,Z,Te,z,ue,!0,Fe),Se=D(Pe,L);return Oe&&Se?Pe.p.then(function($e){return ge[je]=$e,_(N,ue)}):(Oe?ge[je]=Pe:N=Se?Pe.p:Pe,_(N,ue))}))}).then(function(){return N})}(q,oe)).then(be):!k&&g.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():g.stringification&&k?[be(q)]:k?be(q):Promise.resolve(be(q));function Ne(_,N,K){Object.assign(_,N);var I=H.map(function(Z){var ue=_[Z];return delete _[Z],ue});K(),H.forEach(function(Z,ue){_[Z]=I[ue]})}function ve(_,N,K,I,Z,ue,xe){var ce=void 0,Oe={},Te=N===void 0?"undefined":s(N),z=ye?function(Le){var me=xe||I.type||O.getJSONType(N);ye(Object.assign(Le||Oe,{keypath:_,value:N,cyclic:K,stateObj:I,promisesData:Z,resolvingTypesonPromise:ue,awaitingTypesonPromise:D(N,L)},me!==void 0?{type:me}:{}))}:null;if(Te in{string:1,boolean:1,number:1,undefined:1})return N===void 0||Te==="number"&&(isNaN(N)||N===-1/0||N===1/0)?(ce=Re(_,N,I,Z,!1,ue,z))!==N&&(Oe={replaced:ce}):ce=N,z&&z(),ce;if(N===null)return z&&z(),N;if(K&&!I.iterateIn&&!I.iterateUnsetNumeric){var ge=m.indexOf(N);if(!(ge<0))return M[_]="#",z&&z({cyclicKeypath:ae[ge]}),"#"+ae[ge];K===!0&&(m.push(N),ae.push(_))}var je=Y(N),Fe=i(N),Pe=(je||Fe)&&(!t.length||I.replaced)||I.iterateIn?N:Re(_,N,I,Z,je||Fe,null,z),Se=void 0;if(Pe!==N?(ce=Pe,Oe={replaced:Pe}):Fe||I.iterateIn==="array"?(Se=new Array(N.length),Oe={clone:Se}):je||I.iterateIn==="object"?Oe={clone:Se={}}:(_===""&&D(N,L)&&Z.push([_,N,K,I,void 0,void 0,I.type]),ce=N),z&&z(),g.iterateNone)return Se||ce;if(!Se)return ce;if(I.iterateIn){var $e=function(me){var Ue={ownKeys:N.hasOwnProperty(me)};Ne(I,Ue,function(){var Ie=_+(_?".":"")+ee(me),De=ve(Ie,N[me],!!K,I,Z,ue);D(De,L)?Z.push([Ie,De,!!K,I,Se,me,I.type]):De!==void 0&&(Se[me]=De)})};for(var rt in N)$e(rt);z&&z({endIterateIn:!0,end:!0})}else u(N).forEach(function(Le){var me=_+(_?".":"")+ee(Le);Ne(I,{ownKeys:!0},function(){var Ue=ve(me,N[Le],!!K,I,Z,ue);D(Ue,L)?Z.push([me,Ue,!!K,I,Se,Le,I.type]):Ue!==void 0&&(Se[Le]=Ue)})}),z&&z({endIterateOwn:!0,end:!0});if(I.iterateUnsetNumeric){for(var it=N.length,at=function(me){if(!(me in N)){var Ue=_+(_?".":"")+me;Ne(I,{ownKeys:!1},function(){var Ie=ve(Ue,void 0,!!K,I,Z,ue);D(Ie,L)?Z.push([Ue,Ie,!!K,I,Se,me,I.type]):Ie!==void 0&&(Se[me]=Ie)})}},Ge=0;Ge<it;Ge++)at(Ge);z&&z({endIterateUnsetNumeric:!0,end:!0})}return Se}function Re(_,N,K,I,Z,ue,xe){for(var ce=Z?t:o,Oe=ce.length;Oe--;){var Te=ce[Oe];if(Te.test(N,K)){var z=Te.type;if(S[z]){var ge=M[_];M[_]=ge?[z].concat(ge):z}return Object.assign(K,{type:z,replaced:!0}),!k&&Te.replaceAsync||Te.replace?(xe&&xe({replacing:!0}),ve(_,Te[k||!Te.replaceAsync?"replace":"replaceAsync"](N,K),Ee&&"readonly",K,I,ue,z)):(xe&&xe({typeDetected:!0}),ve(_,N,Ee&&"readonly",K,I,ue,z))}}return N}};this.encapsulateSync=function(E,C,g){return A(E,C,Object.assign({},{throwOnBadSyncType:!0},g,{sync:!0}))},this.encapsulateAsync=function(E,C,g){return A(E,C,Object.assign({},{throwOnBadSyncType:!0},g,{sync:!1}))};var V=this.revive=function(E,C){var g=(C=Object.assign({sync:!0},r,C)).sync,k=E&&E.$types,M=!0;if(!k)return E;if(k===!0)return E.$;k.$&&Y(k.$)&&(E=E.$,k=k.$,M=!1);var m=[],ae={},oe=function Ee(ye,q,be,Ne,ve,Re){if(!(M&&ye==="$types")){var _=k[ye];if(i(q)||Y(q)){var N=i(q)?new Array(q.length):{};for(u(q).forEach(function(z){var ge=Ee(ye+(ye?".":"")+ee(z),q[z],be||N,Ne,N,z);D(ge,le)?N[z]=void 0:ge!==void 0&&(N[z]=ge)}),q=N;m.length;){var K=l(m[0],4),I=K[0],Z=K[1],ue=K[2],xe=K[3],ce=F(I,Z);if(D(ce,le))ue[xe]=void 0;else{if(ce===void 0)break;ue[xe]=ce}m.splice(0,1)}}if(!_)return q;if(_==="#"){var Oe=F(be,q.substr(1));return Oe===void 0&&m.push([be,q.substr(1),ve,Re]),Oe}var Te=Ne.sync;return[].concat(_).reduce(function(z,ge){var je=S[ge];if(!je)throw new Error("Unregistered type: "+ge);return je[Te&&je.revive?"revive":!Te&&je.reviveAsync?"reviveAsync":"revive"](z,ae)},q)}}("",E,null,C);return we(oe=D(oe,le)?void 0:oe)?g&&C.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():oe:!g&&C.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():g?oe:Promise.resolve(oe)};this.reviveSync=function(E,C){return V(E,Object.assign({},{throwOnBadSyncType:!0},C,{sync:!0}))},this.reviveAsync=function(E,C){return V(E,Object.assign({},{throwOnBadSyncType:!0},C,{sync:!1}))},this.register=function(E,C){return C=C||{},[].concat(E).forEach(function g(k){if(i(k))return k.map(g);k&&u(k).forEach(function(M){if(M==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(O.JSON_TYPES.includes(M))throw new TypeError("Plain JSON object types are reserved as type names");var m=k[M],ae=m.testPlainObjects?t:o,oe=ae.filter(function(Ne){return Ne.type===M});if(oe.length&&(ae.splice(ae.indexOf(oe[0]),1),delete S[M],delete f[M]),m){if(typeof m=="function"){var Ee=m;m={test:function(ve){return ve&&ve.constructor===Ee},replace:function(ve){return fe({},ve)},revive:function(ve){return fe(Object.create(Ee.prototype),ve)}}}else i(m)&&(m={test:m[0],replace:m[1],revive:m[2]});var ye={type:M,test:m.test.bind(m)};m.replace&&(ye.replace=m.replace.bind(m)),m.replaceAsync&&(ye.replaceAsync=m.replaceAsync.bind(m));var q=typeof C.fallback=="number"?C.fallback:C.fallback?0:1/0;if(m.testPlainObjects?t.splice(q,0,ye):o.splice(q,0,ye),m.revive||m.reviveAsync){var be={};m.revive&&(be.revive=m.revive.bind(m)),m.reviveAsync&&(be.reviveAsync=m.reviveAsync.bind(m)),S[M]=be}f[M]=m}})}),this}}function fe(r,t){return u(t).map(function(o){r[o]=t[o]}),r}function ee(r){return r.replace(/~/g,"~0").replace(/\./g,"~1")}function Q(r){return r.replace(/~1/g,".").replace(/~0/g,"~")}function F(r,t){if(t==="")return r;var o=t.indexOf(".");if(o>-1){var S=r[Q(t.substr(0,o))];return S===void 0?void 0:F(S,t.substr(o+1))}return r[Q(t)]}function le(){}function L(r){this.p=new Promise(r)}L.prototype.then=function(r,t){var o=this;return new L(function(S,f){o.p.then(function(p){S(r?r(p):p)},function(p){o.p.catch(function(T){return t?t(T):Promise.reject(T)}).then(S,f)})})},L.prototype.catch=function(r){return this.then(null,r)},L.resolve=function(r){return new L(function(t){t(r)})},L.reject=function(r){return new L(function(t,o){o(r)})},["all","race"].map(function(r){L[r]=function(t){return new L(function(o,S){Promise[r](t.map(function(f){return f.p})).then(o,S)})}}),O.Undefined=le,O.Promise=L,O.isThenable=we,O.toStringTag=se,O.hasConstructorOf=D,O.isObject=W,O.isPlainObject=Y,O.isUserObject=function r(t){if(!t||se(t)!=="Object")return!1;var o=x(t);return!o||D(t,Object)||r(o)},O.escapeKeyPathComponent=ee,O.unescapeKeyPathComponent=Q,O.getByKeyPath=F,O.getJSONType=function(r){return r===null?"null":i(r)?"array":r===void 0?"undefined":s(r)},O.JSON_TYPES=["null","boolean","number","string","array","object"];for(var v={userObject:{test:function(t,o){return O.isUserObject(t)},replace:function(t){return Object.assign({},t)},revive:function(t){return t}}},n=[[{sparseArrays:{testPlainObjects:!0,test:function(t){return Array.isArray(t)},replace:function(t,o){return o.iterateUnsetNumeric=!0,t}}},{sparseUndefined:{test:function(t,o){return t===void 0&&o.ownKeys===!1},replace:function(t){return null},revive:function(t){}}}],{undef:{test:function(t,o){return t===void 0&&(o.ownKeys||!("ownKeys"in o))},replace:function(t){return null},revive:function(t){return new O.Undefined}}}],e={StringObject:{test:function(t){return O.toStringTag(t)==="String"&&(t===void 0?"undefined":s(t))==="object"},replace:function(t){return String(t)},revive:function(t){return new String(t)}},BooleanObject:{test:function(t){return O.toStringTag(t)==="Boolean"&&(t===void 0?"undefined":s(t))==="object"},replace:function(t){return Boolean(t)},revive:function(t){return new Boolean(t)}},NumberObject:{test:function(t){return O.toStringTag(t)==="Number"&&(t===void 0?"undefined":s(t))==="object"},replace:function(t){return Number(t)},revive:function(t){return new Number(t)}}},h=[{nan:{test:function(t){return typeof t=="number"&&isNaN(t)},replace:function(t){return"NaN"},revive:function(t){return NaN}}},{infinity:{test:function(t){return t===1/0},replace:function(t){return"Infinity"},revive:function(t){return 1/0}}},{negativeInfinity:{test:function(t){return t===-1/0},replace:function(t){return"-Infinity"},revive:function(t){return-1/0}}}],c={date:{test:function(t){return O.toStringTag(t)==="Date"},replace:function(t){var o=t.getTime();return isNaN(o)?"NaN":o},revive:function(t){return t==="NaN"?new Date(NaN):new Date(t)}}},$={regexp:{test:function(t){return O.toStringTag(t)==="RegExp"},replace:function(t){return{source:t.source,flags:(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":"")}},revive:function(t){var o=t.source,S=t.flags;return new RegExp(o,S)}}},G={map:{test:function(t){return O.toStringTag(t)==="Map"},replace:function(t){return Array.from(t.entries())},revive:function(t){return new Map(t)}}},pe={set:{test:function(t){return O.toStringTag(t)==="Set"},replace:function(t){return Array.from(t.values())},revive:function(t){return new Set(t)}}},te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=new Uint8Array(256),w=0;w<te.length;w++)j[te.charCodeAt(w)]=w;var P=function(t,o,S){for(var f=new Uint8Array(t,o,S),p=f.length,T="",A=0;A<p;A+=3)T+=te[f[A]>>2],T+=te[(3&f[A])<<4|f[A+1]>>4],T+=te[(15&f[A+1])<<2|f[A+2]>>6],T+=te[63&f[A+2]];return p%3==2?T=T.substring(0,T.length-1)+"=":p%3==1&&(T=T.substring(0,T.length-2)+"=="),T},J=function(t){var o=t.length,S=.75*t.length,f=0,p=void 0,T=void 0,A=void 0,V=void 0;t[t.length-1]==="="&&(S--,t[t.length-2]==="="&&S--);for(var E=new ArrayBuffer(S),C=new Uint8Array(E),g=0;g<o;g+=4)p=j[t.charCodeAt(g)],T=j[t.charCodeAt(g+1)],A=j[t.charCodeAt(g+2)],V=j[t.charCodeAt(g+3)],C[f++]=p<<2|T>>4,C[f++]=(15&T)<<4|A>>2,C[f++]=(3&A)<<6|63&V;return E},X={arraybuffer:{test:function(t){return O.toStringTag(t)==="ArrayBuffer"},replace:function(t,o){o.buffers||(o.buffers=[]);var S=o.buffers.indexOf(t);return S>-1?{index:S}:(o.buffers.push(t),P(t))},revive:function(t,o){if(o.buffers||(o.buffers=[]),(t===void 0?"undefined":s(t))==="object")return o.buffers[t.index];var S=J(t);return o.buffers.push(S),S}}},R=typeof self>"u"?Ye:self,he={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(r){var t=r,o=R[t];o&&(he[r.toLowerCase()]={test:function(f){return O.toStringTag(f)===t},replace:function(f,p){var T=f.buffer,A=f.byteOffset,V=f.length;p.buffers||(p.buffers=[]);var E=p.buffers.indexOf(T);return E>-1?{index:E,byteOffset:A,length:V}:(p.buffers.push(T),{encoded:P(T),byteOffset:A,length:V})},revive:function(f,p){p.buffers||(p.buffers=[]);var T=f.byteOffset,A=f.length,V=f.encoded,E=f.index,C=void 0;return"index"in f?C=p.buffers[E]:(C=J(V),p.buffers.push(C)),new o(C,T,A)}})});var ne={dataview:{test:function(t){return O.toStringTag(t)==="DataView"},replace:function(t,o){var S=t.buffer,f=t.byteOffset,p=t.byteLength;o.buffers||(o.buffers=[]);var T=o.buffers.indexOf(S);return T>-1?{index:T,byteOffset:f,byteLength:p}:(o.buffers.push(S),{encoded:P(S),byteOffset:f,byteLength:p})},revive:function(t,o){o.buffers||(o.buffers=[]);var S=t.byteOffset,f=t.byteLength,p=t.encoded,T=t.index,A=void 0;return"index"in t?A=o.buffers[T]:(A=J(p),o.buffers.push(A)),new DataView(A,S,f)}}},de={IntlCollator:{test:function(t){return O.hasConstructorOf(t,Intl.Collator)},replace:function(t){return t.resolvedOptions()},revive:function(t){return new Intl.Collator(t.locale,t)}},IntlDateTimeFormat:{test:function(t){return O.hasConstructorOf(t,Intl.DateTimeFormat)},replace:function(t){return t.resolvedOptions()},revive:function(t){return new Intl.DateTimeFormat(t.locale,t)}},IntlNumberFormat:{test:function(t){return O.hasConstructorOf(t,Intl.NumberFormat)},replace:function(t){return t.resolvedOptions()},revive:function(t){return new Intl.NumberFormat(t.locale,t)}}};function re(r){for(var t=new Uint16Array(r.length),o=0;o<r.length;o++)t[o]=r.charCodeAt(o);return t.buffer}var ie={file:{test:function(t){return O.toStringTag(t)==="File"},replace:function(t){var o=new XMLHttpRequest;if(o.open("GET",URL.createObjectURL(t),!1),typeof TextEncoder<"u"&&o.overrideMimeType("text/plain; charset=utf-16le"),o.status!==200&&o.status!==0)throw new Error("Bad Blob access: "+o.status);return o.send(),{type:t.type,stringContents:o.responseText,name:t.name,lastModified:t.lastModified}},revive:function(t){var o=t.name,S=t.type,f=t.stringContents,p=t.lastModified,T=re(f);return new File([T],o,{type:S,lastModified:p})},replaceAsync:function(t){return new O.Promise(function(o,S){if(t.isClosed)S(new Error("The File is closed"));else{var f=new FileReader;f.addEventListener("load",function(){o({type:t.type,stringContents:f.result,name:t.name,lastModified:t.lastModified})}),f.addEventListener("error",function(){S(f.error)}),f.readAsText(t,"UTF-16")}})}}};return[v,n,e,h,c,$,{imagedata:{test:function(t){return O.toStringTag(t)==="ImageData"},replace:function(t){return{array:Array.from(t.data),width:t.width,height:t.height}},revive:function(t){return new ImageData(new Uint8ClampedArray(t.array),t.width,t.height)}}},{imagebitmap:{test:function(t){return O.toStringTag(t)==="ImageBitmap"||t&&t.dataset&&t.dataset.toStringTag==="ImageBitmap"},replace:function(t){var o=document.createElement("canvas");return o.getContext("2d").drawImage(t,0,0),o.toDataURL()},revive:function(t){var o=document.createElement("canvas"),S=o.getContext("2d"),f=document.createElement("img");return f.onload=function(){S.drawImage(f,0,0)},f.src=t,o},reviveAsync:function(t){var o=document.createElement("canvas"),S=o.getContext("2d"),f=document.createElement("img");return f.onload=function(){S.drawImage(f,0,0)},f.src=t,createImageBitmap(o)}}},ie,{file:ie.file,filelist:{test:function(t){return O.toStringTag(t)==="FileList"},replace:function(t){for(var o=[],S=0;S<t.length;S++)o[S]=t.item(S);return o},revive:function(t){function o(){this._files=arguments[0],this.length=this._files.length}return o.prototype.item=function(S){return this._files[S]},o.prototype[Symbol.toStringTag]="FileList",new o(t)}}},{blob:{test:function(t){return O.toStringTag(t)==="Blob"},replace:function(t){var o=new XMLHttpRequest;if(o.open("GET",URL.createObjectURL(t),!1),typeof TextEncoder<"u"&&o.overrideMimeType("text/plain; charset=utf-16le"),o.status!==200&&o.status!==0)throw new Error("Bad Blob access: "+o.status);return o.send(),{type:t.type,stringContents:o.responseText}},revive:function(t){var o=t.type,S=t.stringContents;return new Blob([re(S)],{type:o})},replaceAsync:function(t){return new O.Promise(function(o,S){if(t.isClosed)S(new Error("The Blob is closed"));else{var f=new FileReader;f.addEventListener("load",function(){o({type:t.type,stringContents:f.result})}),f.addEventListener("error",function(){S(f.error)}),f.readAsText(t,"UTF-16")}})}}}].concat(typeof Map=="function"?G:[],typeof Set=="function"?pe:[],typeof ArrayBuffer=="function"?X:[],typeof Uint8Array=="function"?he:[],typeof DataView=="function"?ne:[],typeof Intl<"u"?de:[])})}),ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ke=new Uint8Array(256);for(var Je=0;Je<ke.length;Je++)Ke[ke.charCodeAt(Je)]=Je;var ze=function(d,s,l){l==null&&(l=d.byteLength);for(var b=new Uint8Array(d,s||0,l),u=b.length,i="",U=0;U<u;U+=3)i+=ke[b[U]>>2],i+=ke[(b[U]&3)<<4|b[U+1]>>4],i+=ke[(b[U+1]&15)<<2|b[U+2]>>6],i+=ke[b[U+2]&63];return u%3===2?i=i.substring(0,i.length-1)+"=":u%3===1&&(i=i.substring(0,i.length-2)+"=="),i},We=function(d){var s=d.length,l=d.length*.75,b=0,u,i,U,x;d[d.length-1]==="="&&(l--,d[d.length-2]==="="&&l--);for(var a=new ArrayBuffer(l),B=new Uint8Array(a),H=0;H<s;H+=4)u=Ke[d.charCodeAt(H)],i=Ke[d.charCodeAt(H+1)],U=Ke[d.charCodeAt(H+2)],x=Ke[d.charCodeAt(H+3)],B[b++]=u<<2|i>>4,B[b++]=(i&15)<<4|U>>2,B[b++]=(U&3)<<6|x&63;return a},ct=typeof self>"u"?global:self,Ze={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(y){var d=y,s=ct[d];s&&(Ze[y.toLowerCase()+"2"]={test:function(l){return Ve.toStringTag(l)===d},replace:function(l){var b=l.buffer,u=l.byteOffset,i=l.length;return{buffer:b,byteOffset:u,length:i}},revive:function(l){var b=l.buffer,u=l.byteOffset,i=l.length;return new s(b,u,i)}})});var ft={arraybuffer:{test:function(y){return Ve.toStringTag(y)==="ArrayBuffer"},replace:function(y){return ze(y,0,y.byteLength)},revive:function(y){var d=We(y);return d}}},Ce=new Ve().register(ut),lt="FileReaderSync"in self,Me=[],qe=0;Ce.register([ft,Ze,{blob2:{test:function(y){return Ve.toStringTag(y)==="Blob"},replace:function(y){if(y.isClosed)throw new Error("The Blob is closed");if(lt){var d=Qe(y,"binary"),s=ze(d,0,d.byteLength);return{type:y.type,data:s}}else{Me.push(y);var l={type:y.type,data:{start:qe,end:qe+y.size}};return qe+=y.size,l}},finalize:function(y,d){y.data=ze(d,0,d.byteLength)},revive:function(y){var d=y.type,s=y.data;return new Blob([We(s)],{type:d})}}}]);Ce.mustFinalize=function(){return Me.length>0};Ce.finalize=function(y){return _e(void 0,void 0,void 0,function(){var d,s,l,b,u,i,U,x,a,B;return Be(this,function(H){switch(H.label){case 0:return[4,Xe(new Blob(Me),"binary")];case 1:if(d=H.sent(),y){for(s=0,l=y;s<l.length;s++)if(b=l[s],b.$types){u=b.$types,i=u.$,i&&(u=u.$);for(U in u)x=u[U],a=Ce.types[x],a&&a.finalize&&(B=Ae.getByKeyPath(b,i?"$."+U:U),a.finalize(B,d.slice(B.start,B.end)))}}return Me=[],[2]}})})};var pt=2e3;function yt(y,d){return _e(this,void 0,void 0,function(){function s(){return _e(this,void 0,void 0,function(){var a,B,H,we,se,D,Y,W,O;return Be(this,function(fe){switch(fe.label){case 0:return[4,Promise.all(y.tables.map(function(ee){return ee.count()}))];case 1:a=fe.sent(),a.forEach(function(ee,Q){return b[Q].rowCount=ee}),x.totalRows=a.reduce(function(ee,Q){return ee+Q}),B=JSON.stringify(i,void 0,u?2:void 0),H=B.lastIndexOf("]"),we=B.substring(0,H),l.push(we),se=d.filter,D=function(ee){var Q,F,le,L,v,n,e,h,c,$,G,pe;return Be(this,function(te){switch(te.label){case 0:Q=y.table(ee),F=Q.schema.primKey,le=!!F.keyPath,L=d.numRowsPerChunk||pt,v=le?{tableName:Q.name,inbound:!0,rows:[]}:{tableName:Q.name,inbound:!1,rows:[]},n=JSON.stringify(v,void 0,u?2:void 0),u&&(n=n.split(`
`).join(`
    `)),e=n.lastIndexOf("]"),l.push(n.substring(0,e)),h=null,c=0,$=!0,G=function(){var j,w,P,J,ne,X,R,he,ne;return Be(this,function(de){switch(de.label){case 0:return U&&Ae.ignoreTransaction(function(){return U(x)}),j=h==null?Q.limit(L):Q.where(":id").above(h).limit(L),[4,j.toArray()];case 1:return w=de.sent(),w.length===0?[2,"break"]:(h!=null&&c>0&&(l.push(","),u&&l.push(`
      `)),$=w.length===L,le?(P=se?w.filter(function(re){return se(ee,re)}):w,J=P.map(function(re){return Ce.encapsulate(re)}),Ce.mustFinalize()?[4,Ae.waitFor(Ce.finalize(J))]:[3,3]):[3,4]);case 2:de.sent(),de.label=3;case 3:return ne=JSON.stringify(J,void 0,u?2:void 0),u&&(ne=ne.split(`
`).join(`
      `)),l.push(new Blob([ne.substring(1,ne.length-1)])),c=P.length,h=w.length>0?Ae.getByKeyPath(w[w.length-1],F.keyPath):null,[3,8];case 4:return[4,j.primaryKeys()];case 5:return X=de.sent(),R=X.map(function(re,ie){return[re,w[ie]]}),se&&(R=R.filter(function(re){var ie=re[0],r=re[1];return se(ee,r,ie)})),he=R.map(function(re){return Ce.encapsulate(re)}),Ce.mustFinalize()?[4,Ae.waitFor(Ce.finalize(he))]:[3,7];case 6:de.sent(),de.label=7;case 7:ne=JSON.stringify(he,void 0,u?2:void 0),u&&(ne=ne.split(`
`).join(`
      `)),l.push(new Blob([ne.substring(1,ne.length-1)])),c=R.length,h=X.length>0?X[X.length-1]:null,de.label=8;case 8:return x.completedRows+=w.length,[2]}})},te.label=1;case 1:return $?[5,G()]:[3,3];case 2:return pe=te.sent(),pe==="break"?[3,3]:[3,1];case 3:return l.push(n.substr(e)),x.completedTables+=1,x.completedTables<x.totalTables&&l.push(","),[2]}})},Y=0,W=b,fe.label=2;case 2:return Y<W.length?(O=W[Y].name,[5,D(O)]):[3,5];case 3:fe.sent(),fe.label=4;case 4:return Y++,[3,2];case 5:return l.push(B.substr(H)),x.done=!0,U&&Ae.ignoreTransaction(function(){return U(x)}),[2]}})})}var l,b,u,i,U,x;return Be(this,function(a){switch(a.label){case 0:d=d||{},l=[],b=y.tables.map(function(B){return{name:B.name,schema:ot(B),rowCount:0}}),u=d.prettyJson,i={formatName:"dexie",formatVersion:1,data:{databaseName:y.name,databaseVersion:y.verno,tables:b,data:[]}},U=d.progressCallback,x={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:y.tables.length},a.label=1;case 1:return a.trys.push([1,,6,7]),d.noTransaction?[4,s()]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,y.transaction("r",y.tables,s)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return Ce.finalize(),[7];case 7:return U&&Ae.ignoreTransaction(function(){return U(x)}),[2,new Blob(l,{type:"text/json"})]}})})}var dt=1,vt={Stream:function(){}},ht=He(function(y,d){(function(s){var l=typeof process=="object"&&process.env?process.env:self;s.parser=function(n){return new se(n)},s.CParser=se,s.CStream=Y,s.createStream=D,s.MAX_BUFFER_LENGTH=10*1024*1024,s.DEBUG=l.CDEBUG==="debug",s.INFO=l.CDEBUG==="debug"||l.CDEBUG==="info",s.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var b={textNode:void 0,numberNode:""},u=s.EVENTS.filter(function(n){return n!=="error"&&n!=="end"}),i=0,U;s.STATE={BEGIN:i++,VALUE:i++,OPEN_OBJECT:i++,CLOSE_OBJECT:i++,OPEN_ARRAY:i++,CLOSE_ARRAY:i++,TEXT_ESCAPE:i++,STRING:i++,BACKSLASH:i++,END:i++,OPEN_KEY:i++,CLOSE_KEY:i++,TRUE:i++,TRUE2:i++,TRUE3:i++,FALSE:i++,FALSE2:i++,FALSE3:i++,FALSE4:i++,NULL:i++,NULL2:i++,NULL3:i++,NUMBER_DECIMAL_POINT:i++,NUMBER_DIGIT:i++};for(var x in s.STATE)s.STATE[s.STATE[x]]=x;i=s.STATE;const a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(n){function e(){this.__proto__=n}return e.prototype=n,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(n){return n.__proto__}),Object.keys||(Object.keys=function(n){var e=[];for(var h in n)n.hasOwnProperty(h)&&e.push(h);return e});function B(n){var e=Math.max(s.MAX_BUFFER_LENGTH,10),h=0;for(var c in b){var $=n[c]===void 0?0:n[c].length;if($>e)switch(c){case"text":closeText(n);break;default:F(n,"Max buffer length exceeded: "+c)}h=Math.max(h,$)}n.bufferCheckPosition=s.MAX_BUFFER_LENGTH-h+n.position}function H(n){for(var e in b)n[e]=b[e]}var we=/[\\"\n]/g;function se(n){if(!(this instanceof se))return new se(n);var e=this;H(e),e.bufferCheckPosition=s.MAX_BUFFER_LENGTH,e.q=e.c=e.p="",e.opt=n||{},e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.state=i.BEGIN,e.stack=new Array,e.position=e.column=0,e.line=1,e.slashed=!1,e.unicodeI=0,e.unicodeS=null,e.depth=0,W(e,"onready")}se.prototype={end:function(){le(this)},write:v,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{U=vt.Stream}catch{U=function(){}}function D(n){return new Y(n)}function Y(n){if(!(this instanceof Y))return new Y(n);this._parser=new se(n),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var e=this;U.apply(e),this._parser.onend=function(){e.emit("end")},this._parser.onerror=function(h){e.emit("error",h),e._parser.error=null},u.forEach(function(h){Object.defineProperty(e,"on"+h,{get:function(){return e._parser["on"+h]},set:function(c){if(!c)return e.removeAllListeners(h),e._parser["on"+h]=c,c;e.on(h,c)},enumerable:!0,configurable:!1})})}Y.prototype=Object.create(U.prototype,{constructor:{value:Y}}),Y.prototype.write=function(n){n=new Buffer(n);for(var e=0;e<n.length;e++){var h=n[e];if(this.bytes_remaining>0){for(var c=0;c<this.bytes_remaining;c++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+c]=n[c];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,e=e+c-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&h>=128)if(h>=194&&h<=223&&(this.bytes_in_sequence=2),h>=224&&h<=239&&(this.bytes_in_sequence=3),h>=240&&h<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+e>n.length){for(var $=0;$<=n.length-1-e;$++)this.temp_buffs[this.bytes_in_sequence][$]=n[e+$];return this.bytes_remaining=e+this.bytes_in_sequence-n.length,!0}else{this.string=n.slice(e,e+this.bytes_in_sequence).toString(),e=e+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var G=e;G<n.length&&!(n[G]>=128);G++);this.string=n.slice(e,G).toString(),this._parser.write(this.string),this.emit("data",this.string),e=G-1}},Y.prototype.end=function(n){return n&&n.length&&this._parser.write(n.toString()),this._parser.end(),!0},Y.prototype.on=function(n,e){var h=this;return!h._parser["on"+n]&&u.indexOf(n)!==-1&&(h._parser["on"+n]=function(){var c=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);c.splice(0,0,n),h.emit.apply(h,c)}),U.prototype.on.call(h,n,e)},Y.prototype.destroy=function(){H(this._parser),this.emit("close")};function W(n,e,h){s.INFO,n[e]&&n[e](h)}function O(n,e,h){fe(n),W(n,e,h)}function fe(n,e){n.textNode=Q(n.opt,n.textNode),n.textNode!==void 0&&W(n,e||"onvalue",n.textNode),n.textNode=void 0}function ee(n){n.numberNode&&W(n,"onvalue",parseFloat(n.numberNode)),n.numberNode=""}function Q(n,e){return e===void 0||(n.trim&&(e=e.trim()),n.normalize&&(e=e.replace(/\s+/g," "))),e}function F(n,e){return fe(n),e+=`
Line: `+n.line+`
Column: `+n.column+`
Char: `+n.c,e=new Error(e),n.error=e,W(n,"onerror",e),n}function le(n){return(n.state!==i.VALUE||n.depth!==0)&&F(n,"Unexpected end"),fe(n),n.c="",n.closed=!0,W(n,"onend"),se.call(n,n.opt),n}function L(n){return n===a.carriageReturn||n===a.lineFeed||n===a.space||n===a.tab}function v(n){var e=this;if(this.error)throw this.error;if(e.closed)return F(e,"Cannot write after close. Assign an onready handler.");if(n===null)return le(e);var h=0,c=n.charCodeAt(0),$=e.p;for(s.DEBUG;c&&($=c,e.c=c=n.charCodeAt(h++),$!==c?e.p=$:$=e.p,!!c);)switch(s.DEBUG,e.position++,c===a.lineFeed?(e.line++,e.column=0):e.column++,e.state){case i.BEGIN:c===a.openBrace?e.state=i.OPEN_OBJECT:c===a.openBracket?e.state=i.OPEN_ARRAY:L(c)||F(e,"Non-whitespace before {[.");continue;case i.OPEN_KEY:case i.OPEN_OBJECT:if(L(c))continue;if(e.state===i.OPEN_KEY)e.stack.push(i.CLOSE_KEY);else if(c===a.closeBrace){W(e,"onopenobject"),this.depth++,W(e,"oncloseobject"),this.depth--,e.state=e.stack.pop()||i.VALUE;continue}else e.stack.push(i.CLOSE_OBJECT);c===a.doubleQuote?e.state=i.STRING:F(e,'Malformed object key should start with "');continue;case i.CLOSE_KEY:case i.CLOSE_OBJECT:if(L(c))continue;e.state,i.CLOSE_KEY,c===a.colon?(e.state===i.CLOSE_OBJECT?(e.stack.push(i.CLOSE_OBJECT),fe(e,"onopenobject"),this.depth++):fe(e,"onkey"),e.state=i.VALUE):c===a.closeBrace?(O(e,"oncloseobject"),this.depth--,e.state=e.stack.pop()||i.VALUE):c===a.comma?(e.state===i.CLOSE_OBJECT&&e.stack.push(i.CLOSE_OBJECT),fe(e),e.state=i.OPEN_KEY):F(e,"Bad object");continue;case i.OPEN_ARRAY:case i.VALUE:if(L(c))continue;if(e.state===i.OPEN_ARRAY)if(W(e,"onopenarray"),this.depth++,e.state=i.VALUE,c===a.closeBracket){W(e,"onclosearray"),this.depth--,e.state=e.stack.pop()||i.VALUE;continue}else e.stack.push(i.CLOSE_ARRAY);c===a.doubleQuote?e.state=i.STRING:c===a.openBrace?e.state=i.OPEN_OBJECT:c===a.openBracket?e.state=i.OPEN_ARRAY:c===a.t?e.state=i.TRUE:c===a.f?e.state=i.FALSE:c===a.n?e.state=i.NULL:c===a.minus?e.numberNode+="-":a._0<=c&&c<=a._9?(e.numberNode+=String.fromCharCode(c),e.state=i.NUMBER_DIGIT):F(e,"Bad value");continue;case i.CLOSE_ARRAY:if(c===a.comma)e.stack.push(i.CLOSE_ARRAY),fe(e,"onvalue"),e.state=i.VALUE;else if(c===a.closeBracket)O(e,"onclosearray"),this.depth--,e.state=e.stack.pop()||i.VALUE;else{if(L(c))continue;F(e,"Bad array")}continue;case i.STRING:e.textNode===void 0&&(e.textNode="");var G=h-1,pe=e.slashed,te=e.unicodeI;e:for(;;){for(s.DEBUG;te>0;)if(e.unicodeS+=String.fromCharCode(c),c=n.charCodeAt(h++),e.position++,te===4?(e.textNode+=String.fromCharCode(parseInt(e.unicodeS,16)),te=0,G=h-1):te++,!c)break e;if(c===a.doubleQuote&&!pe){e.state=e.stack.pop()||i.VALUE,e.textNode+=n.substring(G,h-1),e.position+=h-1-G;break}if(c===a.backslash&&!pe&&(pe=!0,e.textNode+=n.substring(G,h-1),e.position+=h-1-G,c=n.charCodeAt(h++),e.position++,!c))break;if(pe){if(pe=!1,c===a.n?e.textNode+=`
`:c===a.r?e.textNode+="\r":c===a.t?e.textNode+="	":c===a.f?e.textNode+="\f":c===a.b?e.textNode+="\b":c===a.u?(te=1,e.unicodeS=""):e.textNode+=String.fromCharCode(c),c=n.charCodeAt(h++),e.position++,G=h-1,c)continue;break}we.lastIndex=h;var j=we.exec(n);if(j===null){h=n.length+1,e.textNode+=n.substring(G,h-1),e.position+=h-1-G;break}if(h=j.index+1,c=n.charCodeAt(j.index),!c){e.textNode+=n.substring(G,h-1),e.position+=h-1-G;break}}e.slashed=pe,e.unicodeI=te;continue;case i.TRUE:c===a.r?e.state=i.TRUE2:F(e,"Invalid true started with t"+c);continue;case i.TRUE2:c===a.u?e.state=i.TRUE3:F(e,"Invalid true started with tr"+c);continue;case i.TRUE3:c===a.e?(W(e,"onvalue",!0),e.state=e.stack.pop()||i.VALUE):F(e,"Invalid true started with tru"+c);continue;case i.FALSE:c===a.a?e.state=i.FALSE2:F(e,"Invalid false started with f"+c);continue;case i.FALSE2:c===a.l?e.state=i.FALSE3:F(e,"Invalid false started with fa"+c);continue;case i.FALSE3:c===a.s?e.state=i.FALSE4:F(e,"Invalid false started with fal"+c);continue;case i.FALSE4:c===a.e?(W(e,"onvalue",!1),e.state=e.stack.pop()||i.VALUE):F(e,"Invalid false started with fals"+c);continue;case i.NULL:c===a.u?e.state=i.NULL2:F(e,"Invalid null started with n"+c);continue;case i.NULL2:c===a.l?e.state=i.NULL3:F(e,"Invalid null started with nu"+c);continue;case i.NULL3:c===a.l?(W(e,"onvalue",null),e.state=e.stack.pop()||i.VALUE):F(e,"Invalid null started with nul"+c);continue;case i.NUMBER_DECIMAL_POINT:c===a.period?(e.numberNode+=".",e.state=i.NUMBER_DIGIT):F(e,"Leading zero not followed by .");continue;case i.NUMBER_DIGIT:a._0<=c&&c<=a._9?e.numberNode+=String.fromCharCode(c):c===a.period?(e.numberNode.indexOf(".")!==-1&&F(e,"Invalid number has two dots"),e.numberNode+="."):c===a.e||c===a.E?((e.numberNode.indexOf("e")!==-1||e.numberNode.indexOf("E")!==-1)&&F(e,"Invalid number has two exponential"),e.numberNode+="e"):c===a.plus||c===a.minus?($===a.e||$===a.E||F(e,"Invalid symbol in number"),e.numberNode+=String.fromCharCode(c)):(ee(e),h--,e.state=e.stack.pop()||i.VALUE);continue;default:F(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&B(e),e}})(d)});function bt(y){var d=0,s=gt(!0),l={pullAsync:function(b){return _e(this,void 0,void 0,function(){var u,i,U;return Be(this,function(x){switch(x.label){case 0:return u=y.slice(d,d+b),d+=b,[4,Xe(u,"text")];case 1:return i=x.sent(),U=s.write(i),l.result=U||{},[2,U]}})})},pullSync:function(b){var u=y.slice(d,d+b);d+=b;var i=Qe(u,"text"),U=s.write(i);return l.result=U||{},U},done:function(){return s.done()},eof:function(){return d>=y.size},result:{}};return l}function gt(y){var d=ht.parser(),s=0,l,b=[],u,i,U=!1,x=!1;return d.onopenobject=function(a){var B={};B.incomplete=!0,l||(l=B),u&&(b.push([i,u,x]),y&&(x?u.push(B):u[i]=B)),u=B,i=a,x=!1,++s},d.onkey=function(a){return i=a},d.onvalue=function(a){return x?u.push(a):u[i]=a},d.oncloseobject=function(){var a;if(delete u.incomplete,i=null,--s===0)U=!0;else{var B=u;a=b.pop(),i=a[0],u=a[1],x=a[2],y||(x?u.push(B):u[i]=B)}},d.onopenarray=function(){var a=[];a.incomplete=!0,l||(l=a),u&&(b.push([i,u,x]),y&&(x?u.push(a):u[i]=a)),u=a,x=!0,i=null,++s},d.onclosearray=function(){var a;if(delete u.incomplete,i=null,--s===0)U=!0;else{var B=u;a=b.pop(),i=a[0],u=a[1],x=a[2],y||(x?u.push(B):u[i]=B)}},{write:function(a){return d.write(a),l},done:function(){return U}}}var et=1024;function mt(y,d){return _e(this,void 0,void 0,function(){var s,l,b,u;return Be(this,function(i){switch(i.label){case 0:return d=d||{},s=d.chunkSizeBytes||et*1024,[4,nt(y,s)];case 1:return l=i.sent(),b=l.result.data,u=new Ae(b.databaseName),u.version(b.databaseVersion).stores(st(b)),[4,tt(u,l,d)];case 2:return i.sent(),[2,u]}})})}function tt(y,d,s){return _e(this,void 0,void 0,function(){function l(){return _e(this,void 0,void 0,function(){var D,Y,W,O,fe;return Be(this,function(ee){switch(ee.label){case 0:D=function(Q){var F,le,L,v,n,e,h,c,$,G,pe,te;return Be(this,function(j){switch(j.label){case 0:if(!Q.rows)return[2,"break"];if(!Q.rows.incomplete&&Q.rows.length===0)return[2,"continue"];if(a&&Ae.ignoreTransaction(function(){return a(B)}),F=Q.tableName,le=y.table(F),L=x.tables.filter(function(w){return w.name===F})[0].schema,!le){if(s.acceptMissingTables)return[2,"continue"];throw new Error("Exported table "+Q.tableName+" is missing in installed database")}if(!s.acceptChangedPrimaryKey&&L.split(",")[0]!=le.schema.primKey.src)throw new Error("Primary key differs for table "+Q.tableName+". ");for(v=Q.rows,n=[],e=0;e<v.length&&(h=v[e],!h.incomplete);e++)n.push(Ce.revive(h));return c=s.filter,$=c?Q.inbound?n.filter(function(w){return c(F,w)}):n.filter(function(w){var P=w[0],J=w[1];return c(F,J,P)}):n,G=Q.inbound?[void 0,$]:[$.map(function(w){return w[0]}),n.map(function(w){return w[1]})],pe=G[0],te=G[1],s.overwriteValues?[4,le.bulkPut(te,pe)]:[3,2];case 1:return j.sent(),[3,4];case 2:return[4,le.bulkAdd(te,pe)];case 3:j.sent(),j.label=4;case 4:return B.completedRows+=n.length,n.incomplete||(B.completedTables+=1),v.splice(0,n.length),[2]}})},Y=0,W=x.data,ee.label=1;case 1:return Y<W.length?(O=W[Y],[5,D(O)]):[3,4];case 2:if(fe=ee.sent(),fe==="break")return[3,4];ee.label=3;case 3:return Y++,[3,1];case 4:for(;x.data.length>0&&x.data[0].rows&&!x.data[0].rows.incomplete;)x.data.splice(0,1);return!u.done()&&!u.eof()?U?(u.pullSync(b),[3,7]):[3,5]:[3,8];case 5:return[4,Ae.waitFor(u.pullAsync(b))];case 6:ee.sent(),ee.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var b,u,i,U,x,a,B,H,we,se;return Be(this,function(D){switch(D.label){case 0:return s=s||{},b=s.chunkSizeBytes||et*1024,[4,nt(d,b)];case 1:if(u=D.sent(),i=u.result,U="FileReaderSync"in self,x=i.data,!s.acceptNameDiff&&y.name!==x.databaseName)throw new Error("Name differs. Current database name is "+y.name+" but export is "+x.databaseName);if(!s.acceptVersionDiff&&y.verno!==x.databaseVersion)throw new Error("Database version differs. Current database is in version "+y.verno+" but export is "+x.databaseVersion);if(a=s.progressCallback,B={done:!1,completedRows:0,completedTables:0,totalRows:x.tables.reduce(function(Y,W){return Y+W.rowCount},0),totalTables:x.tables.length},a&&Ae.ignoreTransaction(function(){return a(B)}),!s.clearTablesBeforeImport)return[3,5];H=0,we=y.tables,D.label=2;case 2:return H<we.length?(se=we[H],[4,se.clear()]):[3,5];case 3:D.sent(),D.label=4;case 4:return H++,[3,2];case 5:return s.noTransaction?[4,l()]:[3,7];case 6:return D.sent(),[3,9];case 7:return[4,y.transaction("rw",y.tables,l)];case 8:D.sent(),D.label=9;case 9:return B.done=!0,a&&Ae.ignoreTransaction(function(){return a(B)}),[2]}})})}function nt(y,d){return _e(this,void 0,void 0,function(){var s,l;return Be(this,function(b){switch(b.label){case 0:s="slice"in y?bt(y):y,b.label=1;case 1:return s.eof()?[3,3]:[4,s.pullAsync(d)];case 2:return b.sent(),s.result.data&&s.result.data.data?[3,3]:[3,1];case 3:if(l=s.result,!l||l.formatName!="dexie")throw new Error("Given file is not a dexie export");if(l.formatVersion>dt)throw new Error("Format version "+l.formatVersion+" not supported");if(!l.data)throw new Error("No data in export file");if(!l.data.databaseName)throw new Error("Missing databaseName in export file");if(!l.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!l.data.tables)throw new Error("Missing tables in export file");return[2,s]}})})}Ae.prototype.export=function(y){return yt(this,y)};Ae.prototype.import=function(y,d){return tt(this,y,d)};Ae.import=function(y,d){return mt(y,d)};export{yt as e,tt as i};
