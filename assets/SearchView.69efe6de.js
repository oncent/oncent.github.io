import{m as H,q as $,t as g,y as P,v as e,z as x,P as q,Q as G,r as f,c as Q,w as Y,J as R,k as r,B as v,u as y,G as o,V as E,W as F}from"./@vue.aa17ec7c.js";import{_ as J,B as U,e as W,d as A,t as N,f as K,u as O,a as X}from"./index.1ab36cef.js";import{_ as T}from"./Select.vue_vue_type_style_index_0_lang.2d99261f.js";import{_ as z}from"./DateTime.vue_vue_type_script_setup_true_lang.fb04d68f.js";import{d as C}from"./dayjs.8eec1a0d.js";import{_ as Z,a as ee}from"./BillItem.vue_vue_type_script_setup_true_lang.a970845e.js";import"./vue-router.835b731e.js";import"./dexie.a92c4e2b.js";import"./uuid.fbc3d34b.js";import"./@vueuse.9aab9800.js";import"./vue-i18n.bcf46dc7.js";import"./@intlify.03657722.js";import"./lodash-es.94cbcf30.js";const te=c=>(q("data-v-914c42f6"),c=c(),G(),c),le={class:"clearable flex items-center"},se=te(()=>e("i",{class:"icon-close icon-xs opacity-30"},null,-1)),ie=[se],oe=H({__name:"Clearable",props:{visible:{type:Boolean}},emits:["clear"],setup(c){return(V,a)=>($(),g("div",le,[P(V.$slots,"default",{},void 0,!0),e("div",{class:x(["close buttoned rounded-full",{visible:c.visible}]),onClick:a[0]||(a[0]=h=>V.$emit("clear"))},ie,2)]))}});const I=J(oe,[["__scopeId","data-v-914c42f6"]]),k=c=>(q("data-v-a0bcb2a7"),c=c(),G(),c),ne={class:"pt-4 pb-2"},ae={class:"flex justify-between py-2"},de={class:"flex-1 flex justify-between"},ue={class:"flex"},re={class:"flex justify-between py-2"},ce={class:"flex items-center px-2"},ve=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-align-middle icon-xs"})],-1)),fe={class:"px-2"},pe={class:"flex rounded-full shadow overflow-hidden"},me={class:"flex justify-between py-2"},_e={class:"flex items-center px-2"},xe=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-credit-card icon-xs"})],-1)),ye={class:"px-2 whitespace-nowrap"},he={class:"flex"},be={class:"rounded-full shadow px-2 buttoned mx-2 flex items-center"},we=k(()=>e("div",{class:"px-2"},"-",-1)),$e={class:"rounded-full shadow px-2 buttoned mx-2"},ge={class:"flex justify-between py-2"},Ve={class:"flex items-center px-2"},Ce=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-user-list icon-xs"})],-1)),ke={class:"px-2"},Ie={class:"flex"},je={class:"shadow buttoned px-4 max-w-[160px] rounded-full h-full truncate mx-2 py-1"},Be={class:"flex justify-between py-2"},Ue={class:"flex items-center px-2"},Se=k(()=>e("div",{class:"w-6 flex justify-center"},[e("i",{class:"icon-carousel icon-xs"})],-1)),De={class:"px-2"},Me={class:"flex"},Ye={class:"shadow buttoned px-4 max-w-[160px] rounded-full h-full truncate mx-2 py-1"},Ee=["onClick"],Fe={class:"w-8 flex justify-center"},He={class:"mx-2"},Ne=k(()=>e("div",null,[e("i",{class:"icon-play-list-search"})],-1)),Te={class:"px-2"},ze=H({__name:"BillFilter",props:{modelValue:null},emits:["update:modelValue"],setup(c,{emit:V}){const a=f(!1),h=()=>{a.value=!a.value},w=(l,t)=>{l.value=t.value;const s=Y(()=>t.value.length,_=>{_>0&&(l.value=t.value,s())});Y(()=>l.value,(_,B)=>{_.length===0&&(B.length===1?l.value=[B[0]]:l.value=[t.value[0]])})},S=l=>l.isValid()?l.format("YYYY-MM-DD"):N("early"),D=l=>l.isValid()?l.format("YYYY-MM-DD"):N("later"),p=f(C.unix(-1/0)),u=f(C.unix(1/0)),i=f(-1/0),n=f(1/0),d=f(),m=f([]),{allUsers:M}=W();w(m,M);const b=f([]),j=Q(()=>A.filter(l=>d.value===void 0||l.type===d.value));w(b,j),Y(d,()=>{b.value=[...j.value]});const L=()=>{p.value=C.unix(-1/0),u.value=C.unix(1/0),i.value=-1/0,n.value=1/0,d.value=void 0,m.value=M.value,b.value=[...j.value]};return R(()=>{var l,t;V("update:modelValue",{start:(l=p.value)!=null&&l.isValid()?p.value:void 0,end:(t=u.value)!=null&&t.isValid()?p.value:void 0,max:n.value,min:i.value,type:d.value,users:m.value.map(s=>s.id),categories:b.value.map(s=>s.id)})}),(l,t)=>($(),g("div",ne,[e("div",{class:x(["filter-field transition-all rounded",[a.value?"h-[252px] opacity-100":"h-0 overflow-hidden opacity-0"]])},[e("div",ae,[e("div",de,[e("div",ue,[r(I,{visible:!0,class:"rounded-full shadow px-2 buttoned truncate py-2",onClear:t[1]||(t[1]=s=>p.value=y(C).unix(-1/0))},{default:v(()=>[r(z,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),"display-formatter":S},{icon:v(()=>[e("div",null,o(l.$t("from"))+":",1)]),_:1},8,["modelValue"])]),_:1})]),e("div",null,[r(I,{visible:!0,class:"rounded-full shadow px-2 buttoned truncate py-2",onClear:t[3]||(t[3]=s=>u.value=y(C).unix(1/0))},{default:v(()=>[r(z,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=s=>u.value=s),"display-formatter":D},{icon:v(()=>[e("div",null,o(l.$t("to"))+":",1)]),_:1},8,["modelValue"])]),_:1})])])]),e("div",re,[e("div",ce,[ve,e("div",fe,o(l.$t("type"))+":",1)]),e("div",pe,[e("div",{class:x(["w-80px text-center buttoned py-1",{"!bg-stone-700 !text-white":d.value===y(U).Income}]),onClick:t[4]||(t[4]=s=>d.value=y(U).Income)},o(l.$t("income")),3),e("div",{class:x(["w-80px text-center buttoned py-1",{"!bg-stone-700 !text-white":d.value===y(U).Expenses}]),onClick:t[5]||(t[5]=s=>d.value=y(U).Expenses)},o(l.$t("expenses")),3),e("div",{class:x(["w-80px text-center buttoned py-1",{"!bg-stone-700 !text-white":d.value===void 0}]),onClick:t[6]||(t[6]=s=>d.value=void 0)},o(l.$t("all")),3)])]),e("div",me,[e("div",_e,[xe,e("div",ye,o(l.$t("range"))+":",1)]),e("div",he,[e("div",be,[r(I,{visible:!0,onClear:t[9]||(t[9]=s=>i.value=-1/0)},{default:v(()=>[i.value!==-1/0?E(($(),g("input",{key:0,"onUpdate:modelValue":t[7]||(t[7]=s=>i.value=s),type:"number",class:"max-w-50px bg-transparent focus:border-none focus:outline-none text-right py-1",inputmode:"decimal"},null,512)),[[F,i.value]]):($(),g("div",{key:1,class:"py-1",onClick:t[8]||(t[8]=s=>i.value=0)},o(l.$t("unlimited")),1))]),_:1})]),we,e("div",$e,[r(I,{visible:!0,onClear:t[12]||(t[12]=s=>n.value=1/0)},{default:v(()=>[n.value!==1/0?E(($(),g("input",{key:0,"onUpdate:modelValue":t[10]||(t[10]=s=>n.value=s),type:"number",class:"max-w-50px bg-transparent focus:border-none focus:outline-none text-right py-1",inputmode:"decimal"},null,512)),[[F,n.value]]):($(),g("div",{key:1,class:"py-1",onClick:t[11]||(t[11]=s=>n.value=0)},o(l.$t("unlimited")),1))]),_:1})])])]),e("div",ge,[e("div",Ve,[Ce,e("div",ke,o(l.$t("users"))+":",1)]),e("div",Ie,[r(T,{modelValue:m.value,"onUpdate:modelValue":t[13]||(t[13]=s=>m.value=s),list:y(M),multiple:"","value-key":"id"},{default:v(({allSelected:s})=>[e("div",je,o(s?l.$t("all"):m.value.length===0?"None":m.value.map(_=>_.name).join(",")),1)]),_:1},8,["modelValue","list"])])]),e("div",Be,[e("div",Ue,[Se,e("div",De,o(l.$t("categories"))+":",1)]),e("div",Me,[r(T,{modelValue:b.value,"onUpdate:modelValue":t[14]||(t[14]=s=>b.value=s),list:y(j),multiple:"","value-key":"id"},{default:v(({allSelected:s})=>[e("div",Ye,o(s?l.$t("all"):b.value.length===0?l.$t("none"):b.value.map(_=>l.$t(_.name)).join(",")),1)]),option:v(({item:s,selected:_,select:B})=>[e("div",{class:x(["p-2 buttoned flex items-center",{"!bg-gray-700 text-white":_}]),onClick:Xe=>B()},[e("div",Fe,[e("i",{class:x([s.icon])},null,2)]),e("div",He,o(l.$t(s.name)),1)],10,Ee)]),_:1},8,["modelValue","list"])])])],2),e("div",{class:x(["flex justify-between py-2",{"border-t":a.value}])},[e("div",null,[e("div",{class:x(["buttoned rounded-sm px-2 text-gray-600",{"opacity-0 pointer-events-none":!a.value}]),onClick:L},o(l.$t("reset")),3)]),e("div",{class:"flex items-center rounded-sm buttoned px-2",onClick:h},[Ne,e("div",Te,o(l.$t("filter")),1)])],2)]))}});const qe=J(ze,[["__scopeId","data-v-a0bcb2a7"]]),Ge={class:"w-full h-full flex justify-center p-2"},Je={class:"h-full w-full mx-2 max-w-[600px] flex flex-col"},Le={class:"search w-full flex justify-center pt-4"},Pe={class:"w-full h-10 shadow-md rounded-sm flex items-center px-4 focus-within:shadow-lg"},Qe={class:"flex-1"},Re=e("i",{class:"icon-search"},null,-1),We=[Re],Ae={class:"flex-1 flex flex-col overflow-hidden"},Ke={class:"text-sm text-gray-500"},Oe={class:"flex-1 divide-y overflow-y-auto"},vt=H({__name:"SearchView",setup(c){const{list:V}=O(),a=f(""),h=f([]),w=f(),S=()=>{if(!w.value){h.value=[];return}const u=w.value;h.value=V.value.filter(i=>K(i,{...u,comment:a.value}))},D=(u,i)=>{const m=Math.min(h.value.length,u+i)-u;return 72*m},{show:p}=X();return(u,i)=>($(),g("div",Ge,[e("div",Je,[e("div",Le,[e("div",Pe,[e("div",Qe,[r(I,{visible:a.value.length>0,onClear:i[1]||(i[1]=n=>a.value="")},{default:v(()=>[E(e("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>a.value=n),type:"text",class:"w-full bg-transparent focus:border-none focus:outline-none"},null,512),[[F,a.value]])]),_:1},8,["visible"])]),e("div",{class:"buttoned p-3 rounded-full",onClick:S},We)])]),e("div",Ae,[r(qe,{modelValue:w.value,"onUpdate:modelValue":i[2]||(i[2]=n=>w.value=n)},null,8,["modelValue"]),e("div",Ke,o(u.$t("total"))+": "+o(h.value.length),1),e("div",Oe,[r(Z,{list:h.value,"value-key":"id","get-range-height":D,"footer-height":96},{default:v(({item:n})=>[r(ee,{bill:n,onClick:d=>y(p)(n)},null,8,["bill","onClick"])]),_:1},8,["list"])])])])]))}});export{vt as default};
